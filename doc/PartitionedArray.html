<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>
  Class: PartitionedArray
  
    &mdash; Documentation by YARD 0.9.28
  
</title>

  <link rel="stylesheet" href="css/style.css" type="text/css" />

  <link rel="stylesheet" href="css/common.css" type="text/css" />

<script type="text/javascript">
  pathId = "PartitionedArray";
  relpath = '';
</script>


  <script type="text/javascript" charset="utf-8" src="js/jquery.js"></script>

  <script type="text/javascript" charset="utf-8" src="js/app.js"></script>


  </head>
  <body>
    <div class="nav_wrap">
      <iframe id="nav" src="class_list.html?1"></iframe>
      <div id="resizer"></div>
    </div>

    <div id="main" tabindex="-1">
      <div id="header">
        <div id="menu">
  
    <a href="_index.html">Index (P)</a> &raquo;
    
    
    <span class="title">PartitionedArray</span>
  
</div>

        <div id="search">
  
    <a class="full_list_link" id="class_list_link"
        href="class_list.html">

        <svg width="24" height="24">
          <rect x="0" y="4" width="24" height="4" rx="1" ry="1"></rect>
          <rect x="0" y="12" width="24" height="4" rx="1" ry="1"></rect>
          <rect x="0" y="20" width="24" height="4" rx="1" ry="1"></rect>
        </svg>
    </a>
  
</div>
        <div class="clear"></div>
      </div>

      <div id="content"><h1>Class: PartitionedArray
  
  
  
</h1>
<div class="box_info">
  
  <dl>
    <dt>Inherits:</dt>
    <dd>
      <span class="inheritName">Object</span>
      
        <ul class="fullTree">
          <li>Object</li>
          
            <li class="next">PartitionedArray</li>
          
        </ul>
        <a href="#" class="inheritanceTree">show all</a>
      
    </dd>
  </dl>
  

  
  
  
  
  

  

  
  <dl>
    <dt>Defined in:</dt>
    <dd>lib/all.rb<span class="defines">,<br />
  lib/partitioned_array.rb,<br /> lib/dr/partitioned_array.rb</span>
</dd>
  </dl>
  
</div>

<h2>Overview</h2><div class="docstring">
  <div class="discussion">
    
<p>PartitionedArray class, a data structure that is partitioned at a lower level, but functions as an almost-normal array at the high level</p>


  </div>
</div>
<div class="tags">
  

</div><div id="subclasses">
  <h2>Direct Known Subclasses</h2>
  <p class="children"><span class='object_link'><a href="ManagedPartitionedArray.html" title="ManagedPartitionedArray (class)">ManagedPartitionedArray</a></span>, <span class='object_link'><a href="PartitionedArrayDR.html" title="PartitionedArrayDR (class)">PartitionedArrayDR</a></span></p>
</div>

  
    <h2>
      Constant Summary
      <small><a href="#" class="constants_summary_toggle">collapse</a></small>
    </h2>

    <dl class="constants">
      
        <dt id="PARTITION_AMOUNT-constant" class="">PARTITION_AMOUNT =
          <div class="docstring">
  <div class="discussion">
    
<p>DB_SIZE &gt; PARTITION_AMOUNT</p>


  </div>
</div>
<div class="tags">
  

</div>
        </dt>
        <dd><pre class="code"><span class='int'>3</span></pre></dd>
      
        <dt id="OFFSET-constant" class="">OFFSET =
          <div class="docstring">
  <div class="discussion">
    
<p>The initial, + 1</p>


  </div>
</div>
<div class="tags">
  

</div>
        </dt>
        <dd><pre class="code"><span class='int'>1</span></pre></dd>
      
        <dt id="DB_SIZE-constant" class="">DB_SIZE =
          <div class="docstring">
  <div class="discussion">
    
<p>This came with the math, but you can just state the PARTITION_AMOUNT in total and not worry about the offset in the end</p>


  </div>
</div>
<div class="tags">
  

</div>
        </dt>
        <dd><pre class="code"><span class='int'>10</span></pre></dd>
      
        <dt id="DEFAULT_PATH-constant" class="">DEFAULT_PATH =
          <div class="docstring">
  <div class="discussion">
    
<p>Caveat: The DB_SIZE is the total # of partitions, but you subtract it by one since the first partition is 0, in code.</p>


  </div>
</div>
<div class="tags">
  

</div>
        </dt>
        <dd><pre class="code"><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>./CGMFS</span><span class='tstring_end'>&#39;</span></span></pre></dd>
      
        <dt id="DEBUGGING-constant" class="">DEBUGGING =
          <div class="docstring">
  <div class="discussion">
    
<p>default fallSback/write to current path</p>


  </div>
</div>
<div class="tags">
  

</div>
        </dt>
        <dd><pre class="code"><span class='kw'>false</span></pre></dd>
      
        <dt id="PAUSE_DEBUG-constant" class="">PAUSE_DEBUG =
          
        </dt>
        <dd><pre class="code"><span class='kw'>false</span></pre></dd>
      
        <dt id="DB_NAME-constant" class="">DB_NAME =
          
        </dt>
        <dd><pre class="code"><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>partitioned_array_slice</span><span class='tstring_end'>&#39;</span></span></pre></dd>
      
        <dt id="PARTITION_ADDITION_AMOUNT-constant" class="">PARTITION_ADDITION_AMOUNT =
          <div class="docstring">
  <div class="discussion">
    
<p>The amount of partitions to add when the array is full</p>


  </div>
</div>
<div class="tags">
  

</div>
        </dt>
        <dd><pre class="code"><span class='int'>1</span></pre></dd>
      
        <dt id="DYNAMICALLY_ALLOCATES-constant" class="">DYNAMICALLY_ALLOCATES =
          <div class="docstring">
  <div class="discussion">
    
<p>If true, the array will dynamically allocate more partitions when it is full</p>


  </div>
</div>
<div class="tags">
  

</div>
        </dt>
        <dd><pre class="code"><span class='kw'>true</span></pre></dd>
      
        <dt id="LABEL_INTEGER-constant" class="">LABEL_INTEGER =
          <div class="docstring">
  <div class="discussion">
    
<p>for []</p>


  </div>
</div>
<div class="tags">
  

</div>
        </dt>
        <dd><pre class="code"><span class='kw'>false</span></pre></dd>
      
        <dt id="LABEL_RANGES-constant" class="">LABEL_RANGES =
          
        </dt>
        <dd><pre class="code"><span class='kw'>false</span></pre></dd>
      
    </dl>
  




  <h2>Instance Attribute Summary <small><a href="#" class="summary_toggle">collapse</a></small></h2>
  <ul class="summary">
    
      <li class="public ">
  <span class="summary_signature">
    
      <a href="#data_arr-instance_method" title="#data_arr (instance method)">#<strong>data_arr</strong>  &#x21d2; Object </a>
    

    
  </span>
  
  
  
    
    
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'>
<p>Access individual instance variables with caution…</p>
</div></span>
  
</li>

    
      <li class="public ">
  <span class="summary_signature">
    
      <a href="#db_name-instance_method" title="#db_name (instance method)">#<strong>db_name</strong>  &#x21d2; Object </a>
    

    
  </span>
  
  
  
    
    
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'>
<p>Access individual instance variables with caution…</p>
</div></span>
  
</li>

    
      <li class="public ">
  <span class="summary_signature">
    
      <a href="#db_path-instance_method" title="#db_path (instance method)">#<strong>db_path</strong>  &#x21d2; Object </a>
    

    
  </span>
  
  
  
    
    
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'>
<p>Access individual instance variables with caution…</p>
</div></span>
  
</li>

    
      <li class="public ">
  <span class="summary_signature">
    
      <a href="#db_size-instance_method" title="#db_size (instance method)">#<strong>db_size</strong>  &#x21d2; Object </a>
    

    
  </span>
  
  
  
    
    
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'>
<p>Access individual instance variables with caution…</p>
</div></span>
  
</li>

    
      <li class="public ">
  <span class="summary_signature">
    
      <a href="#partition_addition_amount-instance_method" title="#partition_addition_amount (instance method)">#<strong>partition_addition_amount</strong>  &#x21d2; Object </a>
    

    
  </span>
  
  
  
    
    
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'>
<p>Access individual instance variables with caution…</p>
</div></span>
  
</li>

    
      <li class="public ">
  <span class="summary_signature">
    
      <a href="#partition_amount_and_offset-instance_method" title="#partition_amount_and_offset (instance method)">#<strong>partition_amount_and_offset</strong>  &#x21d2; Object </a>
    

    
  </span>
  
  
  
    
    
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'>
<p>Access individual instance variables with caution…</p>
</div></span>
  
</li>

    
      <li class="public ">
  <span class="summary_signature">
    
      <a href="#range_arr-instance_method" title="#range_arr (instance method)">#<strong>range_arr</strong>  &#x21d2; Object </a>
    

    
  </span>
  
  
  
    
    
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'>
<p>Access individual instance variables with caution…</p>
</div></span>
  
</li>

    
      <li class="public ">
  <span class="summary_signature">
    
      <a href="#rel_arr-instance_method" title="#rel_arr (instance method)">#<strong>rel_arr</strong>  &#x21d2; Object </a>
    

    
  </span>
  
  
  
    
    
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'>
<p>Access individual instance variables with caution…</p>
</div></span>
  
</li>

    
  </ul>




  
    <h2>
      Instance Method Summary
      <small><a href="#" class="summary_toggle">collapse</a></small>
    </h2>

    <ul class="summary">
      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#[]-instance_method" title="#[] (instance method)">#<strong>[]</strong>(*ids, hash: false, label_ranges: @label_ranges, label_integer: @label_integer)  &#x21d2; Object </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'>
<p>2/7/2023 10:39AM examine closely later (also: this was never imnplemented in DragonRuby’s PartitionedArray classes).</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#add-instance_method" title="#add (instance method)">#<strong>add</strong>(return_added_element_id: true, &amp;block)  &#x21d2; Object </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'>
<p>We define the add_left routine as starting from the end of @data_arr, and working the way back until we find the first element that is nilm if no elements return nil, then return nil as well.</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#add_partition-instance_method" title="#add_partition (instance method)">#<strong>add_partition</strong>  &#x21d2; Object </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'></div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#all_empty_partitions%3F-instance_method" title="#all_empty_partitions? (instance method)">#<strong>all_empty_partitions?</strong>  &#x21d2; Boolean </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'></div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#allocate-instance_method" title="#allocate (instance method)">#<strong>allocate</strong>(db_size: @db_size, partition_amount_and_offset: @partition_amount_and_offset, override: false)  &#x21d2; Object </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'>
<p>create an initial database (instance variable) later on, make this so it will load a database if its there, and if there’s no data, create a standard database then save it Set to work with the default constants.</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#debug-instance_method" title="#debug (instance method)">#<strong>debug</strong>(string)  &#x21d2; Object </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'></div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#debug_and_pause-instance_method" title="#debug_and_pause (instance method)">#<strong>debug_and_pause</strong>(message)  &#x21d2; Object </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'></div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#delete-instance_method" title="#delete (instance method)">#<strong>delete</strong>(id)  &#x21d2; Object </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'></div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#delete_partition-instance_method" title="#delete_partition (instance method)">#<strong>delete_partition</strong>(partition_id)  &#x21d2; Object </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'></div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#delete_partition_subelement-instance_method" title="#delete_partition_subelement (instance method)">#<strong>delete_partition_subelement</strong>(id, partition_id)  &#x21d2; Object </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'></div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#dup_data_arr!-instance_method" title="#dup_data_arr! (instance method)">#<strong>dup_data_arr!</strong>  &#x21d2; Object </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'></div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#get-instance_method" title="#get (instance method)">#<strong>get</strong>(id, hash: false)  &#x21d2; Object </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'>
<p>Returns a hash based on the array element you are searching for.</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#get_partition-instance_method" title="#get_partition (instance method)">#<strong>get_partition</strong>(partition_id)  &#x21d2; Object </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'></div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#initialize-instance_method" title="#initialize (instance method)">#<strong>initialize</strong>(label_integer: LABEL_INTEGER, label_ranges: LABEL_RANGES, partition_addition_amount: PARTITION_ADDITION_AMOUNT, dynamically_allocates: DYNAMICALLY_ALLOCATES, db_size: DB_SIZE, partition_amount_and_offset: PARTITION_AMOUNT + OFFSET, db_path: DEFAULT_PATH, db_name: DB_NAME)  &#x21d2; PartitionedArray </a>
    

    
  </span>
  
  
    <span class="note title constructor">constructor</span>
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'>
<p>A new instance of PartitionedArray.</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#load_dynamically_allocates_from_file!-instance_method" title="#load_dynamically_allocates_from_file! (instance method)">#<strong>load_dynamically_allocates_from_file!</strong>  &#x21d2; Object </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'></div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#load_from_files!-instance_method" title="#load_from_files! (instance method)">#<strong>load_from_files!</strong>(db_folder: @db_folder)  &#x21d2; Object </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'>
<p>loads the files within the directory CGMFS/partitioned_array_slice needed things range_arr =&gt; it is the array of ranges that the database is divided into data_arr =&gt; it is output to json rel_arr =&gt; it is output to json part_} =&gt; it is taken from the range_arr subdivisions; perform a map and load it into the database, one by one.</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#load_partition_addition_amount_from_file!-instance_method" title="#load_partition_addition_amount_from_file! (instance method)">#<strong>load_partition_addition_amount_from_file!</strong>(db_folder: @db_folder)  &#x21d2; Object </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'></div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#load_partition_from_file!-instance_method" title="#load_partition_from_file! (instance method)">#<strong>load_partition_from_file!</strong>(partition_id)  &#x21d2; Object </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'>
<p>Plan: be able to dump @data_arr to disk anytime you want.</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#mkdir_bindir-instance_method" title="#mkdir_bindir (instance method)">#<strong>mkdir_bindir</strong>(path)  &#x21d2; Object </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'></div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#range_db_get-instance_method" title="#range_db_get (instance method)">#<strong>range_db_get</strong>(range_arr, db_num)  &#x21d2; Object </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'>
<p>LABEL_INTEGER LABEL_RANGES end here.</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#save_all_to_files!-instance_method" title="#save_all_to_files! (instance method)">#<strong>save_all_to_files!</strong>(db_folder: @db_folder, db_path: @db_path, db_name: @db_name)  &#x21d2; Object </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'></div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#save_dynamically_allocates_to_file!-instance_method" title="#save_dynamically_allocates_to_file! (instance method)">#<strong>save_dynamically_allocates_to_file!</strong>  &#x21d2; Object </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'></div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#save_partition_addition_amount_to_file!-instance_method" title="#save_partition_addition_amount_to_file! (instance method)">#<strong>save_partition_addition_amount_to_file!</strong>(db_folder: @db_folder)  &#x21d2; Object </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'></div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#save_partition_to_file!-instance_method" title="#save_partition_to_file! (instance method)">#<strong>save_partition_to_file!</strong>(partition_id, db_folder: @db_folder)  &#x21d2; Object </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'></div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#set-instance_method" title="#set (instance method)">#<strong>set</strong>(id, &amp;block)  &#x21d2; Object </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'>
<p>TODO: Class#set(integer id) -&gt; boolean Will yield a hash to some element id within the data array, to which you could use a block and modify said data.</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#set_partition_subelement-instance_method" title="#set_partition_subelement (instance method)">#<strong>set_partition_subelement</strong>(id, partition_id, &amp;block)  &#x21d2; Object </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'>
<p>set the partition’s array element to what is specified.</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#string2range-instance_method" title="#string2range (instance method)">#<strong>string2range</strong>(range_string)  &#x21d2; Object </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'></div></span>
  
</li>

      
    </ul>
  

<div id="constructor_details" class="method_details_list">
  <h2>Constructor Details</h2>
  
    <div class="method_details first">
  <h3 class="signature first" id="initialize-instance_method">
  
    #<strong>initialize</strong>(label_integer: LABEL_INTEGER, label_ranges: LABEL_RANGES, partition_addition_amount: PARTITION_ADDITION_AMOUNT, dynamically_allocates: DYNAMICALLY_ALLOCATES, db_size: DB_SIZE, partition_amount_and_offset: PARTITION_AMOUNT + OFFSET, db_path: DEFAULT_PATH, db_name: DB_NAME)  &#x21d2; <tt><span class='object_link'><a href="" title="PartitionedArray (class)">PartitionedArray</a></span></tt> 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    
<p>Returns a new instance of PartitionedArray.</p>


  </div>
</div>
<div class="tags">
  

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


17
18
19
20
21
22
23
24
25
26
27
28
29
30
31</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/all.rb', line 17</span>

<span class='kw'>def</span> <span class='id identifier rubyid_initialize'>initialize</span><span class='lparen'>(</span><span class='label'>label_integer:</span> <span class='const'><span class='object_link'><a href="#LABEL_INTEGER-constant" title="PartitionedArray::LABEL_INTEGER (constant)">LABEL_INTEGER</a></span></span><span class='comma'>,</span> <span class='label'>label_ranges:</span> <span class='const'><span class='object_link'><a href="#LABEL_RANGES-constant" title="PartitionedArray::LABEL_RANGES (constant)">LABEL_RANGES</a></span></span><span class='comma'>,</span> <span class='label'>partition_addition_amount:</span> <span class='const'><span class='object_link'><a href="#PARTITION_ADDITION_AMOUNT-constant" title="PartitionedArray::PARTITION_ADDITION_AMOUNT (constant)">PARTITION_ADDITION_AMOUNT</a></span></span><span class='comma'>,</span> <span class='label'>dynamically_allocates:</span> <span class='const'><span class='object_link'><a href="#DYNAMICALLY_ALLOCATES-constant" title="PartitionedArray::DYNAMICALLY_ALLOCATES (constant)">DYNAMICALLY_ALLOCATES</a></span></span><span class='comma'>,</span> <span class='label'>db_size:</span> <span class='const'><span class='object_link'><a href="#DB_SIZE-constant" title="PartitionedArray::DB_SIZE (constant)">DB_SIZE</a></span></span><span class='comma'>,</span> <span class='label'>partition_amount_and_offset:</span> <span class='const'><span class='object_link'><a href="#PARTITION_AMOUNT-constant" title="PartitionedArray::PARTITION_AMOUNT (constant)">PARTITION_AMOUNT</a></span></span> <span class='op'>+</span> <span class='const'><span class='object_link'><a href="#OFFSET-constant" title="PartitionedArray::OFFSET (constant)">OFFSET</a></span></span><span class='comma'>,</span> <span class='label'>db_path:</span> <span class='const'><span class='object_link'><a href="#DEFAULT_PATH-constant" title="PartitionedArray::DEFAULT_PATH (constant)">DEFAULT_PATH</a></span></span><span class='comma'>,</span> <span class='label'>db_name:</span> <span class='const'><span class='object_link'><a href="#DB_NAME-constant" title="PartitionedArray::DB_NAME (constant)">DB_NAME</a></span></span><span class='rparen'>)</span>
  <span class='ivar'>@label_integer</span> <span class='op'>=</span> <span class='id identifier rubyid_label_integer'>label_integer</span>
  <span class='ivar'>@label_ranges</span> <span class='op'>=</span> <span class='id identifier rubyid_label_ranges'>label_ranges</span>
  <span class='ivar'>@db_size</span> <span class='op'>=</span> <span class='id identifier rubyid_db_size'>db_size</span>
  <span class='ivar'>@partition_amount_and_offset</span> <span class='op'>=</span> <span class='id identifier rubyid_partition_amount_and_offset'>partition_amount_and_offset</span>
  <span class='ivar'>@allocated</span> <span class='op'>=</span> <span class='kw'>false</span>
  <span class='ivar'>@db_path</span> <span class='op'>=</span> <span class='id identifier rubyid_db_path'>db_path</span>
  <span class='ivar'>@data_arr</span> <span class='op'>=</span> <span class='lbracket'>[</span><span class='rbracket'>]</span> <span class='comment'># the data array which contains the data, has to be partitioned accordingly
</span>  <span class='ivar'>@range_arr</span> <span class='op'>=</span> <span class='lbracket'>[</span><span class='rbracket'>]</span> <span class='comment'># the range array which maintains the partition locations
</span>  <span class='ivar'>@rel_arr</span> <span class='op'>=</span> <span class='lbracket'>[</span><span class='rbracket'>]</span> <span class='comment'># a basic array from 1..n used in binary search
</span>  <span class='ivar'>@db_name</span> <span class='op'>=</span> <span class='id identifier rubyid_db_name'>db_name</span>

  <span class='ivar'>@partition_addition_amount</span> <span class='op'>=</span> <span class='id identifier rubyid_partition_addition_amount'>partition_addition_amount</span>
  <span class='ivar'>@dynamically_allocates</span> <span class='op'>=</span> <span class='id identifier rubyid_dynamically_allocates'>dynamically_allocates</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
  
</div>

  <div id="instance_attr_details" class="attr_details">
    <h2>Instance Attribute Details</h2>
    
      
      <span id="data_arr=-instance_method"></span>
      <div class="method_details first">
  <h3 class="signature first" id="data_arr-instance_method">
  
    #<strong>data_arr</strong>  &#x21d2; <tt>Object</tt> 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    
<p>Access individual instance variables with caution…</p>


  </div>
</div>
<div class="tags">
  

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


126
127
128</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/partitioned_array.rb', line 126</span>

<span class='kw'>def</span> <span class='id identifier rubyid_data_arr'>data_arr</span>
  <span class='ivar'>@data_arr</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      
      <span id="db_name=-instance_method"></span>
      <div class="method_details ">
  <h3 class="signature " id="db_name-instance_method">
  
    #<strong>db_name</strong>  &#x21d2; <tt>Object</tt> 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    
<p>Access individual instance variables with caution…</p>


  </div>
</div>
<div class="tags">
  

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


126
127
128</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/partitioned_array.rb', line 126</span>

<span class='kw'>def</span> <span class='id identifier rubyid_db_name'>db_name</span>
  <span class='ivar'>@db_name</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      
      <span id="db_path=-instance_method"></span>
      <div class="method_details ">
  <h3 class="signature " id="db_path-instance_method">
  
    #<strong>db_path</strong>  &#x21d2; <tt>Object</tt> 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    
<p>Access individual instance variables with caution…</p>


  </div>
</div>
<div class="tags">
  

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


126
127
128</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/partitioned_array.rb', line 126</span>

<span class='kw'>def</span> <span class='id identifier rubyid_db_path'>db_path</span>
  <span class='ivar'>@db_path</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      
      <span id="db_size=-instance_method"></span>
      <div class="method_details ">
  <h3 class="signature " id="db_size-instance_method">
  
    #<strong>db_size</strong>  &#x21d2; <tt>Object</tt> 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    
<p>Access individual instance variables with caution…</p>


  </div>
</div>
<div class="tags">
  

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


126
127
128</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/partitioned_array.rb', line 126</span>

<span class='kw'>def</span> <span class='id identifier rubyid_db_size'>db_size</span>
  <span class='ivar'>@db_size</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      
      <span id="partition_addition_amount=-instance_method"></span>
      <div class="method_details ">
  <h3 class="signature " id="partition_addition_amount-instance_method">
  
    #<strong>partition_addition_amount</strong>  &#x21d2; <tt>Object</tt> 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    
<p>Access individual instance variables with caution…</p>


  </div>
</div>
<div class="tags">
  

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


126
127
128</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/partitioned_array.rb', line 126</span>

<span class='kw'>def</span> <span class='id identifier rubyid_partition_addition_amount'>partition_addition_amount</span>
  <span class='ivar'>@partition_addition_amount</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      
      <span id="partition_amount_and_offset=-instance_method"></span>
      <div class="method_details ">
  <h3 class="signature " id="partition_amount_and_offset-instance_method">
  
    #<strong>partition_amount_and_offset</strong>  &#x21d2; <tt>Object</tt> 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    
<p>Access individual instance variables with caution…</p>


  </div>
</div>
<div class="tags">
  

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


126
127
128</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/partitioned_array.rb', line 126</span>

<span class='kw'>def</span> <span class='id identifier rubyid_partition_amount_and_offset'>partition_amount_and_offset</span>
  <span class='ivar'>@partition_amount_and_offset</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      
      <span id="range_arr=-instance_method"></span>
      <div class="method_details ">
  <h3 class="signature " id="range_arr-instance_method">
  
    #<strong>range_arr</strong>  &#x21d2; <tt>Object</tt> 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    
<p>Access individual instance variables with caution…</p>


  </div>
</div>
<div class="tags">
  

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


126
127
128</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/partitioned_array.rb', line 126</span>

<span class='kw'>def</span> <span class='id identifier rubyid_range_arr'>range_arr</span>
  <span class='ivar'>@range_arr</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      
      <span id="rel_arr=-instance_method"></span>
      <div class="method_details ">
  <h3 class="signature " id="rel_arr-instance_method">
  
    #<strong>rel_arr</strong>  &#x21d2; <tt>Object</tt> 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    
<p>Access individual instance variables with caution…</p>


  </div>
</div>
<div class="tags">
  

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


126
127
128</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/partitioned_array.rb', line 126</span>

<span class='kw'>def</span> <span class='id identifier rubyid_rel_arr'>rel_arr</span>
  <span class='ivar'>@rel_arr</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
  </div>


  <div id="instance_method_details" class="method_details_list">
    <h2>Instance Method Details</h2>

    
      <div class="method_details first">
  <h3 class="signature first" id="[]-instance_method">
  
    #<strong>[]</strong>(*ids, hash: false, label_ranges: @label_ranges, label_integer: @label_integer)  &#x21d2; <tt>Object</tt> 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    
<p>2/7/2023 10:39AM examine closely later (also: this was never imnplemented in DragonRuby’s PartitionedArray classes)</p>


  </div>
</div>
<div class="tags">
  

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


174
175
176
177
178
179
180
181
182
183
184
185
186
187
188
189
190
191
192
193
194
195
196
197
198
199
200</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/partitioned_array.rb', line 174</span>

<span class='kw'>def</span> <span class='op'>[]</span><span class='lparen'>(</span><span class='op'>*</span><span class='id identifier rubyid_ids'>ids</span><span class='comma'>,</span> <span class='label'>hash:</span> <span class='kw'>false</span><span class='comma'>,</span> <span class='label'>label_ranges:</span> <span class='ivar'>@label_ranges</span><span class='comma'>,</span> <span class='label'>label_integer:</span> <span class='ivar'>@label_integer</span><span class='rparen'>)</span>
  <span class='comment'>#puts &quot;ids: #{ids[0]}&quot;
</span>  <span class='kw'>return</span> <span class='id identifier rubyid_get'>get</span><span class='lparen'>(</span><span class='id identifier rubyid_ids'>ids</span><span class='lbracket'>[</span><span class='int'>0</span><span class='rbracket'>]</span><span class='comma'>,</span> <span class='label'>hash:</span> <span class='id identifier rubyid_hash'>hash</span><span class='rparen'>)</span> <span class='kw'>if</span> <span class='lparen'>(</span><span class='id identifier rubyid_ids'>ids</span><span class='period'>.</span><span class='id identifier rubyid_size'>size</span><span class='op'>==</span><span class='int'>1</span> <span class='op'>&amp;&amp;</span> <span class='id identifier rubyid_ids'>ids</span><span class='lbracket'>[</span><span class='int'>0</span><span class='rbracket'>]</span><span class='period'>.</span><span class='id identifier rubyid_is_a?'>is_a?</span><span class='lparen'>(</span><span class='const'>Integer</span><span class='rparen'>)</span> <span class='op'>&amp;&amp;</span> <span class='op'>!</span><span class='id identifier rubyid_label_integer'>label_integer</span><span class='rparen'>)</span>
  <span class='kw'>return</span> <span class='lbrace'>{</span> <span class='id identifier rubyid_ids'>ids</span><span class='lbracket'>[</span><span class='int'>0</span><span class='rbracket'>]</span> <span class='op'>=&gt;</span> <span class='id identifier rubyid_get'>get</span><span class='lparen'>(</span><span class='id identifier rubyid_ids'>ids</span><span class='lbracket'>[</span><span class='int'>0</span><span class='rbracket'>]</span><span class='comma'>,</span> <span class='label'>hash:</span> <span class='id identifier rubyid_hash'>hash</span><span class='rparen'>)</span> <span class='rbrace'>}</span> <span class='kw'>if</span> <span class='id identifier rubyid_ids'>ids</span><span class='period'>.</span><span class='id identifier rubyid_size'>size</span><span class='op'>==</span><span class='int'>1</span> <span class='op'>&amp;&amp;</span> <span class='id identifier rubyid_ids'>ids</span><span class='lbracket'>[</span><span class='int'>0</span><span class='rbracket'>]</span><span class='period'>.</span><span class='id identifier rubyid_is_a?'>is_a?</span><span class='lparen'>(</span><span class='const'>Integer</span><span class='rparen'>)</span> <span class='op'>&amp;&amp;</span> <span class='id identifier rubyid_label_integer'>label_integer</span>
  <span class='comment'>#return get(id, hash: hash) if id.is_a? Integer
</span>  <span class='id identifier rubyid_ids'>ids</span><span class='period'>.</span><span class='id identifier rubyid_map'>map</span> <span class='kw'>do</span> <span class='op'>|</span><span class='id identifier rubyid_id'>id</span><span class='op'>|</span>
    <span class='kw'>case</span> <span class='id identifier rubyid_id'>id</span>
    <span class='kw'>when</span> <span class='const'>Integer</span>
      <span class='kw'>if</span> <span class='lparen'>(</span><span class='id identifier rubyid_label_integer'>label_integer</span><span class='rparen'>)</span>
        <span class='lbrace'>{</span> <span class='id identifier rubyid_id'>id</span> <span class='op'>=&gt;</span> <span class='id identifier rubyid_get'>get</span><span class='lparen'>(</span><span class='id identifier rubyid_id'>id</span><span class='comma'>,</span> <span class='label'>hash:</span> <span class='id identifier rubyid_hash'>hash</span><span class='rparen'>)</span> <span class='rbrace'>}</span> <span class='kw'>if</span> <span class='id identifier rubyid_label_integer'>label_integer</span>
      <span class='kw'>else</span>
        <span class='id identifier rubyid_get'>get</span><span class='lparen'>(</span><span class='id identifier rubyid_id'>id</span><span class='comma'>,</span> <span class='label'>hash:</span> <span class='id identifier rubyid_hash'>hash</span><span class='rparen'>)</span> <span class='kw'>if</span> <span class='op'>!</span><span class='id identifier rubyid_label_integer'>label_integer</span>
      <span class='kw'>end</span>
      
    <span class='kw'>when</span> <span class='const'>Range</span>
      <span class='kw'>if</span> <span class='lparen'>(</span><span class='id identifier rubyid_label_ranges'>label_ranges</span><span class='rparen'>)</span>
        <span class='id identifier rubyid_id'>id</span><span class='period'>.</span><span class='id identifier rubyid_to_a'>to_a</span><span class='period'>.</span><span class='id identifier rubyid_map'>map</span> <span class='lbrace'>{</span> <span class='op'>|</span><span class='id identifier rubyid_i'>i</span><span class='op'>|</span> <span class='lbrace'>{</span> <span class='id identifier rubyid_i'>i</span> <span class='op'>=&gt;</span> <span class='id identifier rubyid_get'>get</span><span class='lparen'>(</span><span class='id identifier rubyid_i'>i</span><span class='comma'>,</span> <span class='label'>hash:</span> <span class='id identifier rubyid_hash'>hash</span><span class='rparen'>)</span> <span class='rbrace'>}</span><span class='rbrace'>}</span> <span class='kw'>if</span> <span class='id identifier rubyid_label_ranges'>label_ranges</span>
      <span class='kw'>else</span>
        <span class='id identifier rubyid_id'>id</span><span class='period'>.</span><span class='id identifier rubyid_to_a'>to_a</span><span class='period'>.</span><span class='id identifier rubyid_map'>map</span> <span class='lbrace'>{</span> <span class='op'>|</span><span class='id identifier rubyid_i'>i</span><span class='op'>|</span> <span class='id identifier rubyid_get'>get</span><span class='lparen'>(</span><span class='id identifier rubyid_i'>i</span><span class='comma'>,</span> <span class='label'>hash:</span> <span class='id identifier rubyid_hash'>hash</span><span class='rparen'>)</span> <span class='rbrace'>}</span> <span class='kw'>if</span> <span class='op'>!</span><span class='id identifier rubyid_label_ranges'>label_ranges</span>
      <span class='kw'>end</span>
    <span class='kw'>else</span>
      <span class='id identifier rubyid_raise'>raise</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>Invalid id type: </span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_id'>id</span><span class='period'>.</span><span class='id identifier rubyid_class'>class</span><span class='embexpr_end'>}</span><span class='tstring_end'>&quot;</span></span>
    <span class='kw'>end</span>  
  
  <span class='kw'>end</span>
  <span class='comment'>#return id.to_a.map { |i| { i =&gt; get(i, hash: hash)} } if id.is_a? Range
</span><span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="add-instance_method">
  
    #<strong>add</strong>(return_added_element_id: true, &amp;block)  &#x21d2; <tt>Object</tt> 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    
<p>We define the add_left routine as starting from the end of @data_arr, and working the way back until we find the first element that is nilm if no elements return nil, then return nil as well</p>


  </div>
</div>
<div class="tags">
  

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


309
310
311
312
313
314
315
316
317
318
319
320
321
322
323
324
325
326</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/partitioned_array.rb', line 309</span>

<span class='kw'>def</span> <span class='id identifier rubyid_add'>add</span><span class='lparen'>(</span><span class='label'>return_added_element_id:</span> <span class='kw'>true</span><span class='comma'>,</span> <span class='op'>&amp;</span><span class='id identifier rubyid_block'>block</span><span class='rparen'>)</span> 
  <span class='id identifier rubyid_element_id_to_return'>element_id_to_return</span> <span class='op'>=</span> <span class='kw'>nil</span>
  <span class='ivar'>@data_arr</span><span class='period'>.</span><span class='id identifier rubyid_each_with_index'>each_with_index</span> <span class='kw'>do</span> <span class='op'>|</span><span class='id identifier rubyid_element'>element</span><span class='comma'>,</span> <span class='id identifier rubyid_element_index'>element_index</span><span class='op'>|</span>
    <span class='comment'>#puts &quot;element: #{element}&quot;
</span>    <span class='kw'>if</span> <span class='id identifier rubyid_element'>element</span> <span class='op'>==</span> <span class='lbrace'>{</span><span class='rbrace'>}</span> <span class='op'>&amp;&amp;</span> <span class='id identifier rubyid_block_given?'>block_given?</span> <span class='comment'># (if element is nill, no data is added because the partition is &quot;offline&quot;)
</span>      <span class='id identifier rubyid_block'>block</span><span class='period'>.</span><span class='id identifier rubyid_call'>call</span><span class='lparen'>(</span><span class='ivar'>@data_arr</span><span class='lbracket'>[</span><span class='id identifier rubyid_element_index'>element_index</span><span class='rbracket'>]</span><span class='rparen'>)</span> <span class='comment'># seems == to block.call(element)
</span>      <span class='kw'>if</span> <span class='ivar'>@dynamically_allocates</span> <span class='op'>&amp;&amp;</span> <span class='lparen'>(</span><span class='id identifier rubyid_element_index'>element_index</span> <span class='op'>==</span> <span class='ivar'>@db_size</span> <span class='op'>-</span> <span class='int'>1</span> <span class='op'>&amp;&amp;</span> <span class='id identifier rubyid_at_capacity?'>at_capacity?</span><span class='rparen'>)</span>
        <span class='ivar'>@partition_addition_amount</span><span class='period'>.</span><span class='id identifier rubyid_times'>times</span> <span class='lbrace'>{</span> <span class='id identifier rubyid_add_partition'>add_partition</span> <span class='rbrace'>}</span> <span class='comment'>#if element_index == @data_arr.size - 1 # easier code; add if you reach the end of the array
</span>        <span class='id identifier rubyid_save_all_to_files!'>save_all_to_files!</span> <span class='comment'># save the data to the files
</span>      <span class='kw'>end</span>
      <span class='id identifier rubyid_element_id_to_return'>element_id_to_return</span> <span class='op'>=</span> <span class='id identifier rubyid_element_index'>element_index</span>
      <span class='kw'>break</span>
    <span class='kw'>elsif</span> <span class='op'>!</span><span class='id identifier rubyid_block_given?'>block_given?</span>
      <span class='id identifier rubyid_raise'>raise</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>No block given for element </span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_element'>element</span><span class='embexpr_end'>}</span><span class='tstring_end'>&quot;</span></span>
    <span class='kw'>end</span>
  <span class='kw'>end</span>
  <span class='kw'>return</span> <span class='id identifier rubyid_element_id_to_return'>element_id_to_return</span> <span class='kw'>if</span> <span class='id identifier rubyid_return_added_element_id'>return_added_element_id</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="add_partition-instance_method">
  
    #<strong>add_partition</strong>  &#x21d2; <tt>Object</tt> 
  

  

  
</h3><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


238
239
240
241
242
243
244
245
246
247
248
249
250
251</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/all.rb', line 238</span>

<span class='kw'>def</span> <span class='id identifier rubyid_add_partition'>add_partition</span>
  <span class='id identifier rubyid_last_range_num'>last_range_num</span> <span class='op'>=</span> <span class='ivar'>@range_arr</span><span class='period'>.</span><span class='id identifier rubyid_last'>last</span><span class='period'>.</span><span class='id identifier rubyid_to_a'>to_a</span><span class='period'>.</span><span class='id identifier rubyid_last'>last</span> <span class='op'>+</span> <span class='int'>1</span>
  <span class='id identifier rubyid_debug'>debug</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>last_range_num: </span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_last_range_num'>last_range_num</span><span class='embexpr_end'>}</span><span class='tstring_end'>&quot;</span></span>
  <span class='ivar'>@range_arr</span> <span class='op'>&lt;&lt;</span> <span class='lparen'>(</span><span class='id identifier rubyid_last_range_num'>last_range_num</span><span class='op'>..</span><span class='lparen'>(</span><span class='id identifier rubyid_last_range_num'>last_range_num</span> <span class='op'>+</span> <span class='ivar'>@partition_amount_and_offset</span> <span class='op'>-</span> <span class='int'>1</span><span class='rparen'>)</span><span class='rparen'>)</span> <span class='comment'>#works
</span>
  <span class='lparen'>(</span><span class='id identifier rubyid_last_range_num'>last_range_num</span><span class='op'>..</span><span class='lparen'>(</span><span class='id identifier rubyid_last_range_num'>last_range_num</span> <span class='op'>+</span> <span class='ivar'>@partition_amount_and_offset</span> <span class='op'>-</span> <span class='int'>1</span><span class='rparen'>)</span><span class='rparen'>)</span><span class='period'>.</span><span class='id identifier rubyid_to_a'>to_a</span><span class='period'>.</span><span class='id identifier rubyid_each'>each</span> <span class='kw'>do</span> <span class='op'>|</span><span class='id identifier rubyid_i'>i</span><span class='op'>|</span>
    <span class='ivar'>@data_arr</span> <span class='op'>&lt;&lt;</span> <span class='lbrace'>{</span><span class='rbrace'>}</span>
    <span class='ivar'>@rel_arr</span> <span class='op'>&lt;&lt;</span> <span class='id identifier rubyid_i'>i</span>
  <span class='kw'>end</span>

  <span class='ivar'>@db_size</span> <span class='op'>+=</span> <span class='int'>1</span>
  <span class='id identifier rubyid_debug'>debug</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>Partition added successfully; data allocated</span><span class='tstring_end'>&quot;</span></span>
  <span class='id identifier rubyid_debug'>debug</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>@data_arr: </span><span class='embexpr_beg'>#{</span><span class='ivar'>@data_arr</span><span class='embexpr_end'>}</span><span class='tstring_end'>&quot;</span></span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="all_empty_partitions?-instance_method">
  
    #<strong>all_empty_partitions?</strong>  &#x21d2; <tt>Boolean</tt> 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    

  </div>
</div>
<div class="tags">
  
<p class="tag_title">Returns:</p>
<ul class="return">
  
    <li>
      
      
        <span class='type'>(<tt>Boolean</tt>)</span>
      
      
      
    </li>
  
</ul>

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


281
282
283</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/all.rb', line 281</span>

<span class='kw'>def</span> <span class='id identifier rubyid_all_empty_partitions?'>all_empty_partitions?</span>
  <span class='ivar'>@data_arr</span><span class='period'>.</span><span class='id identifier rubyid_all?'>all?</span><span class='lparen'>(</span><span class='op'>&amp;</span><span class='symbol'>:nil?</span><span class='rparen'>)</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="allocate-instance_method">
  
    #<strong>allocate</strong>(db_size: @db_size, partition_amount_and_offset: @partition_amount_and_offset, override: false)  &#x21d2; <tt>Object</tt> 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    
<p>create an initial database (instance variable) later on, make this so it will load a database if its there, and if there’s no data, create a standard database then save it Set to work with the default constants</p>


  </div>
</div>
<div class="tags">
  

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


340
341
342
343
344
345
346
347
348
349
350
351
352
353
354
355
356
357
358
359
360
361
362
363
364
365
366
367</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/partitioned_array.rb', line 340</span>

<span class='kw'>def</span> <span class='id identifier rubyid_allocate'>allocate</span><span class='lparen'>(</span><span class='label'>db_size:</span> <span class='ivar'>@db_size</span><span class='comma'>,</span> <span class='label'>partition_amount_and_offset:</span> <span class='ivar'>@partition_amount_and_offset</span><span class='comma'>,</span> <span class='label'>override:</span> <span class='kw'>false</span><span class='rparen'>)</span>
  <span class='kw'>if</span> <span class='op'>!</span><span class='ivar'>@allocated</span> <span class='op'>||</span> <span class='id identifier rubyid_override'>override</span>
    <span class='ivar'>@allocated</span> <span class='op'>=</span> <span class='kw'>false</span>
    <span class='id identifier rubyid_partition'>partition</span> <span class='op'>=</span> <span class='int'>0</span>

    <span class='id identifier rubyid_db_size'>db_size</span><span class='period'>.</span><span class='id identifier rubyid_times'>times</span> <span class='kw'>do</span>
      <span class='kw'>if</span> <span class='ivar'>@range_arr</span><span class='period'>.</span><span class='id identifier rubyid_empty?'>empty?</span>
        <span class='id identifier rubyid_partition'>partition</span> <span class='op'>+=</span> <span class='id identifier rubyid_partition_amount_and_offset'>partition_amount_and_offset</span>
        <span class='ivar'>@range_arr</span> <span class='op'>&lt;&lt;</span> <span class='lparen'>(</span><span class='int'>0</span><span class='op'>..</span><span class='id identifier rubyid_partition'>partition</span><span class='rparen'>)</span>
        <span class='kw'>next</span>
      <span class='kw'>end</span>
      <span class='id identifier rubyid_partition'>partition</span> <span class='op'>+=</span> <span class='id identifier rubyid_partition_amount_and_offset'>partition_amount_and_offset</span>
      <span class='ivar'>@range_arr</span> <span class='op'>&lt;&lt;</span> <span class='lparen'>(</span><span class='lparen'>(</span><span class='id identifier rubyid_partition'>partition</span> <span class='op'>-</span> <span class='id identifier rubyid_partition_amount_and_offset'>partition_amount_and_offset</span> <span class='op'>+</span> <span class='int'>1</span><span class='rparen'>)</span><span class='op'>..</span><span class='id identifier rubyid_partition'>partition</span><span class='rparen'>)</span>
      <span class='id identifier rubyid_debug_and_pause'>debug_and_pause</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>@range_arr: </span><span class='embexpr_beg'>#{</span><span class='ivar'>@range_arr</span><span class='embexpr_end'>}</span><span class='tstring_end'>&quot;</span></span>
    <span class='kw'>end</span>

    <span class='id identifier rubyid_x'>x</span> <span class='op'>=</span> <span class='int'>0</span> <span class='comment'># offset test, for debug purposes
</span>    <span class='ivar'>@data_arr</span> <span class='op'>=</span> <span class='lparen'>(</span><span class='int'>0</span><span class='op'>..</span><span class='lparen'>(</span><span class='id identifier rubyid_db_size'>db_size</span> <span class='op'>*</span> <span class='lparen'>(</span><span class='id identifier rubyid_partition_amount_and_offset'>partition_amount_and_offset</span> <span class='op'>-</span> <span class='id identifier rubyid_x'>x</span><span class='rparen'>)</span><span class='rparen'>)</span><span class='rparen'>)</span><span class='period'>.</span><span class='id identifier rubyid_to_a'>to_a</span><span class='period'>.</span><span class='id identifier rubyid_map'>map</span> <span class='lbrace'>{</span> <span class='lbrace'>{</span><span class='rbrace'>}</span> <span class='rbrace'>}</span> <span class='comment'># for an array that fills to less than the max of @rel_arr
</span>    <span class='ivar'>@rel_arr</span> <span class='op'>=</span> <span class='ivar'>@data_arr</span><span class='period'>.</span><span class='id identifier rubyid_size'>size</span><span class='period'>.</span><span class='id identifier rubyid_times'>times</span><span class='period'>.</span><span class='id identifier rubyid_map'>map</span> <span class='lbrace'>{</span> <span class='op'>|</span><span class='id identifier rubyid_i'>i</span><span class='op'>|</span> <span class='id identifier rubyid_i'>i</span> <span class='rbrace'>}</span> <span class='comment'># for an array that fills to less than the max of @rel_arr
</span>    <span class='ivar'>@allocated</span> <span class='op'>=</span> <span class='kw'>true</span>
  <span class='kw'>else</span>
    <span class='id identifier rubyid_debug'>debug</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>Initial database has been already allocated.</span><span class='tstring_end'>&#39;</span></span>
  <span class='kw'>end</span>
  <span class='id identifier rubyid_debug'>debug</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>@data_arr element count: </span><span class='embexpr_beg'>#{</span><span class='ivar'>@data_arr</span><span class='period'>.</span><span class='id identifier rubyid_flatten'>flatten</span><span class='period'>.</span><span class='id identifier rubyid_count'>count</span> <span class='op'>-</span> <span class='int'>1</span><span class='embexpr_end'>}</span><span class='tstring_end'>&quot;</span></span>
  <span class='id identifier rubyid_debug'>debug</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>@data_arr: </span><span class='embexpr_beg'>#{</span><span class='ivar'>@data_arr</span><span class='embexpr_end'>}</span><span class='tstring_end'>&quot;</span></span>

  <span class='ivar'>@allocated</span> <span class='op'>=</span> <span class='kw'>true</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="debug-instance_method">
  
    #<strong>debug</strong>(string)  &#x21d2; <tt>Object</tt> 
  

  

  
</h3><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


63
64
65</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/all.rb', line 63</span>

<span class='kw'>def</span> <span class='id identifier rubyid_debug'>debug</span><span class='lparen'>(</span><span class='id identifier rubyid_string'>string</span><span class='rparen'>)</span>
  <span class='id identifier rubyid_p'>p</span> <span class='id identifier rubyid_string'>string</span> <span class='kw'>if</span> <span class='const'><span class='object_link'><a href="#DEBUGGING-constant" title="PartitionedArray::DEBUGGING (constant)">DEBUGGING</a></span></span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="debug_and_pause-instance_method">
  
    #<strong>debug_and_pause</strong>(message)  &#x21d2; <tt>Object</tt> 
  

  

  
</h3><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


258
259
260
261</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/all.rb', line 258</span>

<span class='kw'>def</span> <span class='id identifier rubyid_debug_and_pause'>debug_and_pause</span><span class='lparen'>(</span><span class='id identifier rubyid_message'>message</span><span class='rparen'>)</span>
  <span class='id identifier rubyid_puts'>puts</span> <span class='id identifier rubyid_message'>message</span> <span class='kw'>if</span> <span class='const'><span class='object_link'><a href="#PAUSE_DEBUG-constant" title="PartitionedArray::PAUSE_DEBUG (constant)">PAUSE_DEBUG</a></span></span>
  <span class='id identifier rubyid_gets'>gets</span> <span class='kw'>if</span> <span class='const'><span class='object_link'><a href="#PAUSE_DEBUG-constant" title="PartitionedArray::PAUSE_DEBUG (constant)">PAUSE_DEBUG</a></span></span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="delete-instance_method">
  
    #<strong>delete</strong>(id)  &#x21d2; <tt>Object</tt> 
  

  

  
</h3><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


67
68
69
70
71
72
73
74</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/all.rb', line 67</span>

<span class='kw'>def</span> <span class='id identifier rubyid_delete'>delete</span><span class='lparen'>(</span><span class='id identifier rubyid_id'>id</span><span class='rparen'>)</span>
  <span class='id identifier rubyid_deleted'>deleted</span> <span class='op'>=</span> <span class='kw'>false</span>
  <span class='kw'>if</span> <span class='id identifier rubyid_id'>id</span> <span class='op'>&lt;=</span> <span class='lparen'>(</span><span class='ivar'>@data_arr</span><span class='period'>.</span><span class='id identifier rubyid_size'>size</span> <span class='op'>-</span> <span class='int'>1</span><span class='rparen'>)</span>
    <span class='ivar'>@data_arr</span><span class='lbracket'>[</span><span class='id identifier rubyid_id'>id</span><span class='rbracket'>]</span> <span class='op'>=</span> <span class='kw'>nil</span>
    <span class='id identifier rubyid_deleted'>deleted</span> <span class='op'>=</span> <span class='kw'>true</span>
  <span class='kw'>end</span>
  <span class='id identifier rubyid_deleted'>deleted</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="delete_partition-instance_method">
  
    #<strong>delete_partition</strong>(partition_id)  &#x21d2; <tt>Object</tt> 
  

  

  
</h3><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


113
114
115
116
117
118
119</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/all.rb', line 113</span>

<span class='kw'>def</span> <span class='id identifier rubyid_delete_partition'>delete_partition</span><span class='lparen'>(</span><span class='id identifier rubyid_partition_id'>partition_id</span><span class='rparen'>)</span>
  <span class='comment'># delete the partition id data
</span>  <span class='id identifier rubyid_debug'>debug</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>Partition ID: </span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_partition_id'>partition_id</span><span class='embexpr_end'>}</span><span class='tstring_end'>&quot;</span></span>
  <span class='ivar'>@data_arr</span><span class='lbracket'>[</span><span class='ivar'>@range_arr</span><span class='lbracket'>[</span><span class='id identifier rubyid_partition_id'>partition_id</span><span class='rbracket'>]</span><span class='rbracket'>]</span><span class='period'>.</span><span class='id identifier rubyid_each_with_index'>each_with_index</span> <span class='kw'>do</span> <span class='op'>|</span><span class='id identifier rubyid__'>_</span><span class='comma'>,</span> <span class='id identifier rubyid_index'>index</span><span class='op'>|</span>
    <span class='ivar'>@data_arr</span><span class='lbracket'>[</span><span class='id identifier rubyid_index'>index</span><span class='rbracket'>]</span> <span class='op'>=</span> <span class='kw'>nil</span>
  <span class='kw'>end</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="delete_partition_subelement-instance_method">
  
    #<strong>delete_partition_subelement</strong>(id, partition_id)  &#x21d2; <tt>Object</tt> 
  

  

  
</h3><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


90
91
92
93</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/all.rb', line 90</span>

<span class='kw'>def</span> <span class='id identifier rubyid_delete_partition_subelement'>delete_partition_subelement</span><span class='lparen'>(</span><span class='id identifier rubyid_id'>id</span><span class='comma'>,</span> <span class='id identifier rubyid_partition_id'>partition_id</span><span class='rparen'>)</span>
  <span class='comment'># delete the partition&#39;s array element to what is specified
</span>  <span class='ivar'>@data_arr</span><span class='lbracket'>[</span><span class='ivar'>@range_arr</span><span class='lbracket'>[</span><span class='id identifier rubyid_partition_id'>partition_id</span><span class='rbracket'>]</span><span class='period'>.</span><span class='id identifier rubyid_to_a'>to_a</span><span class='lbracket'>[</span><span class='id identifier rubyid_id'>id</span><span class='rbracket'>]</span><span class='rbracket'>]</span> <span class='op'>=</span> <span class='kw'>nil</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="dup_data_arr!-instance_method">
  
    #<strong>dup_data_arr!</strong>  &#x21d2; <tt>Object</tt> 
  

  

  
</h3><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


285
286
287</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/all.rb', line 285</span>

<span class='kw'>def</span> <span class='id identifier rubyid_dup_data_arr!'>dup_data_arr!</span>
  <span class='ivar'>@data_arr</span><span class='period'>.</span><span class='id identifier rubyid_clone'>clone</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="get-instance_method">
  
    #<strong>get</strong>(id, hash: false)  &#x21d2; <tt>Object</tt> 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    
<p>Returns a hash based on the array element you are searching for. Haven’t done much research afterwards on the idea of whether the binary search is necessary, but it seems like it is. The idea first came up during the research of the partitioned array equation.</p>


  </div>
</div>
<div class="tags">
  

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


374
375
376
377
378
379
380
381
382
383
384
385
386
387
388
389
390
391
392
393
394
395
396
397
398
399
400
401
402
403
404
405
406
407
408
409
410
411
412
413</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/partitioned_array.rb', line 374</span>

<span class='kw'>def</span> <span class='id identifier rubyid_get'>get</span><span class='lparen'>(</span><span class='id identifier rubyid_id'>id</span><span class='comma'>,</span> <span class='label'>hash:</span> <span class='kw'>false</span><span class='rparen'>)</span>
  <span class='kw'>return</span> <span class='kw'>nil</span> <span class='kw'>unless</span> <span class='ivar'>@allocated</span> <span class='comment'># if the database has not been allocated, return nil
</span>  <span class='id identifier rubyid_data'>data</span> <span class='op'>=</span> <span class='kw'>nil</span>
  <span class='id identifier rubyid_db_index'>db_index</span> <span class='op'>=</span> <span class='kw'>nil</span>
  <span class='id identifier rubyid_relative_id'>relative_id</span> <span class='op'>=</span> <span class='kw'>nil</span>

  <span class='ivar'>@range_arr</span><span class='period'>.</span><span class='id identifier rubyid_each_with_index'>each_with_index</span> <span class='kw'>do</span> <span class='op'>|</span><span class='id identifier rubyid_range'>range</span><span class='comma'>,</span> <span class='id identifier rubyid_index'>index</span><span class='op'>|</span>
    <span class='id identifier rubyid_relative_id'>relative_id</span> <span class='op'>=</span> <span class='id identifier rubyid_range'>range</span><span class='period'>.</span><span class='id identifier rubyid_bsearch'>bsearch</span> <span class='lbrace'>{</span> <span class='op'>|</span><span class='id identifier rubyid_element'>element</span><span class='op'>|</span> <span class='ivar'>@rel_arr</span><span class='lbracket'>[</span><span class='id identifier rubyid_element'>element</span><span class='rbracket'>]</span> <span class='op'>&gt;=</span> <span class='id identifier rubyid_id'>id</span> <span class='rbrace'>}</span>
    <span class='kw'>if</span> <span class='id identifier rubyid_relative_id'>relative_id</span>
      <span class='id identifier rubyid_db_index'>db_index</span> <span class='op'>=</span> <span class='id identifier rubyid_index'>index</span>
      <span class='kw'>if</span> <span class='id identifier rubyid_range_db_get'>range_db_get</span><span class='lparen'>(</span><span class='ivar'>@range_arr</span><span class='comma'>,</span> <span class='id identifier rubyid_db_index'>db_index</span><span class='rparen'>)</span><span class='period'>.</span><span class='id identifier rubyid_member?'>member?</span> <span class='ivar'>@rel_arr</span><span class='lbracket'>[</span><span class='id identifier rubyid_relative_id'>relative_id</span><span class='rbracket'>]</span>
        <span class='kw'>break</span>
      <span class='kw'>end</span>
    <span class='kw'>else</span>
      <span class='id identifier rubyid_db_index'>db_index</span> <span class='op'>=</span> <span class='kw'>nil</span>
      <span class='id identifier rubyid_relative_id'>relative_id</span> <span class='op'>=</span> <span class='kw'>nil</span>
    <span class='kw'>end</span>
  <span class='kw'>end</span>

  <span class='kw'>unless</span> <span class='id identifier rubyid_relative_id'>relative_id</span> <span class='op'>&amp;&amp;</span> <span class='id identifier rubyid_db_index'>db_index</span>
    <span class='id identifier rubyid_debug'>debug</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>The value could not be found</span><span class='tstring_end'>&#39;</span></span>
  <span class='kw'>else</span>
    <span class='id identifier rubyid_debug'>debug</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>db_index: </span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_db_index'>db_index</span><span class='embexpr_end'>}</span><span class='tstring_end'>&quot;</span></span>

    <span class='comment'># Special case; composing the array_id
</span>    <span class='kw'>if</span> <span class='id identifier rubyid_db_index'>db_index</span><span class='period'>.</span><span class='id identifier rubyid_zero?'>zero?</span>
      <span class='id identifier rubyid_array_id'>array_id</span> <span class='op'>=</span> <span class='id identifier rubyid_relative_id'>relative_id</span> <span class='op'>-</span> <span class='id identifier rubyid_db_index'>db_index</span> <span class='op'>*</span> <span class='ivar'>@partition_amount_and_offset</span>
    <span class='kw'>else</span>
      <span class='id identifier rubyid_array_id'>array_id</span> <span class='op'>=</span> <span class='lparen'>(</span><span class='id identifier rubyid_relative_id'>relative_id</span> <span class='op'>-</span> <span class='id identifier rubyid_db_index'>db_index</span> <span class='op'>*</span> <span class='ivar'>@partition_amount_and_offset</span><span class='rparen'>)</span> <span class='op'>-</span> <span class='int'>1</span>
    <span class='kw'>end</span>

    <span class='id identifier rubyid_debug'>debug</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>The value was found at </span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_array_id'>array_id</span><span class='embexpr_end'>}</span><span class='tstring_content'> in the array (data_arr)</span><span class='tstring_end'>&quot;</span></span>
    <span class='kw'>if</span> <span class='id identifier rubyid_hash'>hash</span>
      <span class='id identifier rubyid_data'>data</span> <span class='op'>=</span> <span class='lbrace'>{</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>data_partition</span><span class='tstring_end'>&quot;</span></span> <span class='op'>=&gt;</span> <span class='ivar'>@data_arr</span><span class='lbracket'>[</span><span class='ivar'>@range_arr</span><span class='lbracket'>[</span><span class='id identifier rubyid_db_index'>db_index</span><span class='rbracket'>]</span><span class='rbracket'>]</span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>db_index</span><span class='tstring_end'>&quot;</span></span> <span class='op'>=&gt;</span> <span class='id identifier rubyid_db_index'>db_index</span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>array_id</span><span class='tstring_end'>&quot;</span></span> <span class='op'>=&gt;</span> <span class='id identifier rubyid_array_id'>array_id</span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>data</span><span class='tstring_end'>&quot;</span></span> <span class='op'>=&gt;</span> <span class='ivar'>@data_arr</span><span class='lbracket'>[</span><span class='ivar'>@range_arr</span><span class='lbracket'>[</span><span class='id identifier rubyid_db_index'>db_index</span><span class='rbracket'>]</span><span class='period'>.</span><span class='id identifier rubyid_to_a'>to_a</span><span class='lbracket'>[</span><span class='id identifier rubyid_array_id'>array_id</span><span class='rbracket'>]</span><span class='rbracket'>]</span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>db_size</span><span class='tstring_end'>&quot;</span></span> <span class='op'>=&gt;</span> <span class='ivar'>@db_size</span> <span class='rbrace'>}</span>
    <span class='kw'>else</span>
      <span class='id identifier rubyid_data'>data</span> <span class='op'>=</span> <span class='ivar'>@data_arr</span><span class='lbracket'>[</span><span class='ivar'>@range_arr</span><span class='lbracket'>[</span><span class='id identifier rubyid_db_index'>db_index</span><span class='rbracket'>]</span><span class='period'>.</span><span class='id identifier rubyid_to_a'>to_a</span><span class='lbracket'>[</span><span class='id identifier rubyid_array_id'>array_id</span><span class='rbracket'>]</span><span class='rbracket'>]</span>
    <span class='kw'>end</span>
  <span class='kw'>end</span>
  <span class='id identifier rubyid_data'>data</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="get_partition-instance_method">
  
    #<strong>get_partition</strong>(partition_id)  &#x21d2; <tt>Object</tt> 
  

  

  
</h3><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


121
122
123
124
125
126
127
128
129
130</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/all.rb', line 121</span>

<span class='kw'>def</span> <span class='id identifier rubyid_get_partition'>get_partition</span><span class='lparen'>(</span><span class='id identifier rubyid_partition_id'>partition_id</span><span class='rparen'>)</span>
  <span class='comment'># get the partition id data
</span>  <span class='id identifier rubyid_debug'>debug</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>Partition ID: </span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_partition_id'>partition_id</span><span class='embexpr_end'>}</span><span class='tstring_end'>&quot;</span></span>
  <span class='kw'>if</span> <span class='id identifier rubyid_partition_id'>partition_id</span> <span class='op'>&lt;=</span> <span class='ivar'>@db_size</span> <span class='op'>-</span> <span class='int'>1</span>
    <span class='ivar'>@data_arr</span><span class='lbracket'>[</span><span class='ivar'>@range_arr</span><span class='lbracket'>[</span><span class='id identifier rubyid_partition_id'>partition_id</span><span class='rbracket'>]</span><span class='rbracket'>]</span>
  <span class='kw'>else</span>
    <span class='id identifier rubyid_debug'>debug</span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>SliceID </span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_partition_id'>partition_id</span><span class='embexpr_end'>}</span><span class='tstring_content'> is out of bounds.</span><span class='tstring_end'>&quot;</span></span><span class='rparen'>)</span>
    <span class='kw'>nil</span>
  <span class='kw'>end</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="load_dynamically_allocates_from_file!-instance_method">
  
    #<strong>load_dynamically_allocates_from_file!</strong>  &#x21d2; <tt>Object</tt> 
  

  

  
</h3><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


76
77
78
79
80</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/all.rb', line 76</span>

<span class='kw'>def</span> <span class='id identifier rubyid_load_dynamically_allocates_from_file!'>load_dynamically_allocates_from_file!</span>
  <span class='const'>File</span><span class='period'>.</span><span class='id identifier rubyid_open'>open</span><span class='lparen'>(</span><span class='ivar'>@db_path</span> <span class='op'>+</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>/</span><span class='tstring_end'>&#39;</span></span> <span class='op'>+</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>dynamically_allocates.json</span><span class='tstring_end'>&#39;</span></span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>r</span><span class='tstring_end'>&#39;</span></span><span class='rparen'>)</span> <span class='kw'>do</span> <span class='op'>|</span><span class='id identifier rubyid_file'>file</span><span class='op'>|</span>
    <span class='ivar'>@dynamically_allocates</span> <span class='op'>=</span> <span class='const'>JSON</span><span class='period'>.</span><span class='id identifier rubyid_parse'>parse</span><span class='lparen'>(</span><span class='id identifier rubyid_file'>file</span><span class='period'>.</span><span class='id identifier rubyid_read'>read</span><span class='rparen'>)</span>
  <span class='kw'>end</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="load_from_files!-instance_method">
  
    #<strong>load_from_files!</strong>(db_folder: @db_folder)  &#x21d2; <tt>Object</tt> 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    
<p>loads the files within the directory CGMFS/partitioned_array_slice needed things range_arr =&gt; it is the array of ranges that the database is divided into data_arr =&gt; it is output to json rel_arr =&gt; it is output to json part_} =&gt; it is taken from the range_arr subdivisions; perform a map and load it into the database, one by one</p>


  </div>
</div>
<div class="tags">
  

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


456
457
458
459
460
461
462
463
464
465
466
467
468
469
470
471
472</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/partitioned_array.rb', line 456</span>

<span class='kw'>def</span> <span class='id identifier rubyid_load_from_files!'>load_from_files!</span><span class='lparen'>(</span><span class='label'>db_folder:</span> <span class='ivar'>@db_folder</span><span class='rparen'>)</span>
  <span class='id identifier rubyid_load_partition_addition_amount_from_file!'>load_partition_addition_amount_from_file!</span>
  <span class='id identifier rubyid_load_dynamically_allocates_from_file!'>load_dynamically_allocates_from_file!</span>
  <span class='comment'># @db_size needs to be taken into account and changed accordingly
</span>  <span class='id identifier rubyid_path'>path</span> <span class='op'>=</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='embexpr_beg'>#{</span><span class='ivar'>@db_path</span><span class='embexpr_end'>}</span><span class='tstring_content'>/</span><span class='embexpr_beg'>#{</span><span class='ivar'>@db_name</span><span class='embexpr_end'>}</span><span class='tstring_end'>&quot;</span></span>    
  <span class='ivar'>@partition_amount_and_offset</span> <span class='op'>=</span> <span class='const'>File</span><span class='period'>.</span><span class='id identifier rubyid_open'>open</span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>&quot;</span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_path'>path</span><span class='embexpr_end'>}</span><span class='tstring_content'>/partition_amount_and_offset.json</span><span class='tstring_end'>&quot;</span></span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>r</span><span class='tstring_end'>&#39;</span></span><span class='rparen'>)</span> <span class='lbrace'>{</span> <span class='op'>|</span><span class='id identifier rubyid_f'>f</span><span class='op'>|</span> <span class='const'>JSON</span><span class='period'>.</span><span class='id identifier rubyid_parse'>parse</span><span class='lparen'>(</span><span class='id identifier rubyid_f'>f</span><span class='period'>.</span><span class='id identifier rubyid_read'>read</span><span class='rparen'>)</span> <span class='rbrace'>}</span>
  <span class='ivar'>@range_arr</span> <span class='op'>=</span> <span class='const'>File</span><span class='period'>.</span><span class='id identifier rubyid_open'>open</span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>&quot;</span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_path'>path</span><span class='embexpr_end'>}</span><span class='tstring_content'>/range_arr.json</span><span class='tstring_end'>&quot;</span></span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>r</span><span class='tstring_end'>&#39;</span></span><span class='rparen'>)</span> <span class='lbrace'>{</span> <span class='op'>|</span><span class='id identifier rubyid_f'>f</span><span class='op'>|</span> <span class='const'>JSON</span><span class='period'>.</span><span class='id identifier rubyid_parse'>parse</span><span class='lparen'>(</span><span class='id identifier rubyid_f'>f</span><span class='period'>.</span><span class='id identifier rubyid_read'>read</span><span class='rparen'>)</span> <span class='rbrace'>}</span>
  <span class='ivar'>@range_arr</span><span class='period'>.</span><span class='id identifier rubyid_map!'>map!</span><span class='lbrace'>{</span> <span class='op'>|</span><span class='id identifier rubyid_range_element'>range_element</span><span class='op'>|</span> <span class='id identifier rubyid_string2range'>string2range</span><span class='lparen'>(</span><span class='id identifier rubyid_range_element'>range_element</span><span class='rparen'>)</span> <span class='rbrace'>}</span>
  <span class='ivar'>@rel_arr</span> <span class='op'>=</span> <span class='const'>File</span><span class='period'>.</span><span class='id identifier rubyid_open'>open</span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>&quot;</span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_path'>path</span><span class='embexpr_end'>}</span><span class='tstring_content'>/rel_arr.json</span><span class='tstring_end'>&quot;</span></span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>r</span><span class='tstring_end'>&#39;</span></span><span class='rparen'>)</span> <span class='lbrace'>{</span> <span class='op'>|</span><span class='id identifier rubyid_f'>f</span><span class='op'>|</span> <span class='const'>JSON</span><span class='period'>.</span><span class='id identifier rubyid_parse'>parse</span><span class='lparen'>(</span><span class='id identifier rubyid_f'>f</span><span class='period'>.</span><span class='id identifier rubyid_read'>read</span><span class='rparen'>)</span> <span class='rbrace'>}</span>
  <span class='ivar'>@db_size</span> <span class='op'>=</span> <span class='const'>File</span><span class='period'>.</span><span class='id identifier rubyid_open'>open</span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>&quot;</span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_path'>path</span><span class='embexpr_end'>}</span><span class='tstring_content'>/db_size.json</span><span class='tstring_end'>&quot;</span></span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>r</span><span class='tstring_end'>&#39;</span></span><span class='rparen'>)</span> <span class='lbrace'>{</span> <span class='op'>|</span><span class='id identifier rubyid_f'>f</span><span class='op'>|</span> <span class='const'>JSON</span><span class='period'>.</span><span class='id identifier rubyid_parse'>parse</span><span class='lparen'>(</span><span class='id identifier rubyid_f'>f</span><span class='period'>.</span><span class='id identifier rubyid_read'>read</span><span class='rparen'>)</span> <span class='rbrace'>}</span>
  <span class='id identifier rubyid_data_arr_set_partitions'>data_arr_set_partitions</span> <span class='op'>=</span> <span class='lbracket'>[</span><span class='rbracket'>]</span>
  <span class='int'>0</span><span class='period'>.</span><span class='id identifier rubyid_upto'>upto</span><span class='lparen'>(</span><span class='ivar'>@db_size</span> <span class='op'>-</span> <span class='int'>1</span><span class='rparen'>)</span> <span class='kw'>do</span> <span class='op'>|</span><span class='id identifier rubyid_partition_element_index'>partition_element_index</span><span class='op'>|</span>
    <span class='id identifier rubyid_data_arr_set_partitions'>data_arr_set_partitions</span> <span class='op'>&lt;&lt;</span> <span class='const'>File</span><span class='period'>.</span><span class='id identifier rubyid_open'>open</span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>&quot;</span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_path'>path</span><span class='embexpr_end'>}</span><span class='tstring_content'>/</span><span class='embexpr_beg'>#{</span><span class='ivar'>@db_name</span><span class='embexpr_end'>}</span><span class='tstring_content'>_part_</span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_partition_element_index'>partition_element_index</span><span class='embexpr_end'>}</span><span class='tstring_content'>.json</span><span class='tstring_end'>&quot;</span></span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>r</span><span class='tstring_end'>&#39;</span></span><span class='rparen'>)</span> <span class='lbrace'>{</span> <span class='op'>|</span><span class='id identifier rubyid_f'>f</span><span class='op'>|</span> <span class='const'>JSON</span><span class='period'>.</span><span class='id identifier rubyid_parse'>parse</span><span class='lparen'>(</span><span class='id identifier rubyid_f'>f</span><span class='period'>.</span><span class='id identifier rubyid_read'>read</span><span class='rparen'>)</span> <span class='rbrace'>}</span>
    <span class='ivar'>@data_arr</span> <span class='op'>=</span> <span class='id identifier rubyid_data_arr_set_partitions'>data_arr_set_partitions</span><span class='period'>.</span><span class='id identifier rubyid_flatten'>flatten</span> <span class='comment'># side effect: if you don&#39;t flatten it, you get an array with partitioned array elements
</span>  <span class='kw'>end</span>
  <span class='ivar'>@allocated</span> <span class='op'>=</span> <span class='kw'>true</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="load_partition_addition_amount_from_file!-instance_method">
  
    #<strong>load_partition_addition_amount_from_file!</strong>(db_folder: @db_folder)  &#x21d2; <tt>Object</tt> 
  

  

  
</h3><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


316
317
318
319</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/all.rb', line 316</span>

<span class='kw'>def</span> <span class='id identifier rubyid_load_partition_addition_amount_from_file!'>load_partition_addition_amount_from_file!</span><span class='lparen'>(</span><span class='label'>db_folder:</span> <span class='ivar'>@db_folder</span><span class='rparen'>)</span>
  <span class='id identifier rubyid_path'>path</span> <span class='op'>=</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='embexpr_beg'>#{</span><span class='ivar'>@db_path</span><span class='embexpr_end'>}</span><span class='tstring_content'>/</span><span class='embexpr_beg'>#{</span><span class='ivar'>@db_name</span><span class='embexpr_end'>}</span><span class='tstring_end'>&quot;</span></span>
  <span class='ivar'>@partition_addition_amount</span> <span class='op'>=</span> <span class='const'>File</span><span class='period'>.</span><span class='id identifier rubyid_open'>open</span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>&quot;</span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_path'>path</span><span class='embexpr_end'>}</span><span class='tstring_content'>/</span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_db_folder'>db_folder</span><span class='embexpr_end'>}</span><span class='tstring_content'>/partition_addition_amount.json</span><span class='tstring_end'>&quot;</span></span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>r</span><span class='tstring_end'>&#39;</span></span><span class='rparen'>)</span> <span class='lbrace'>{</span> <span class='op'>|</span><span class='id identifier rubyid_f'>f</span><span class='op'>|</span> <span class='const'>JSON</span><span class='period'>.</span><span class='id identifier rubyid_parse'>parse</span><span class='lparen'>(</span><span class='id identifier rubyid_f'>f</span><span class='period'>.</span><span class='id identifier rubyid_read'>read</span><span class='rparen'>)</span> <span class='rbrace'>}</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="load_partition_from_file!-instance_method">
  
    #<strong>load_partition_from_file!</strong>(partition_id)  &#x21d2; <tt>Object</tt> 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    
<p>Plan: be able to dump @data_arr to disk anytime you want</p>


  </div>
</div>
<div class="tags">
  

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


484
485
486
487
488
489
490
491
492
493
494
495
496
497</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/partitioned_array.rb', line 484</span>

<span class='kw'>def</span> <span class='id identifier rubyid_load_partition_from_file!'>load_partition_from_file!</span><span class='lparen'>(</span><span class='id identifier rubyid_partition_id'>partition_id</span><span class='rparen'>)</span>
  <span class='id identifier rubyid_path'>path</span> <span class='op'>=</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='embexpr_beg'>#{</span><span class='ivar'>@db_path</span><span class='embexpr_end'>}</span><span class='tstring_content'>/</span><span class='embexpr_beg'>#{</span><span class='ivar'>@db_name</span><span class='embexpr_end'>}</span><span class='tstring_end'>&quot;</span></span>
  <span class='comment'># @data_arr = File.open(&quot;#{path}/data_arr.json&quot;, &#39;r&#39;) { |f| JSON.parse(f.read) } # can write the entire array to disk for certain operations
</span>  <span class='ivar'>@partition_amount_and_offset</span> <span class='op'>=</span> <span class='const'>File</span><span class='period'>.</span><span class='id identifier rubyid_open'>open</span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>&quot;</span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_path'>path</span><span class='embexpr_end'>}</span><span class='tstring_content'>/partition_amount_and_offset.json</span><span class='tstring_end'>&quot;</span></span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>r</span><span class='tstring_end'>&#39;</span></span><span class='rparen'>)</span> <span class='lbrace'>{</span> <span class='op'>|</span><span class='id identifier rubyid_f'>f</span><span class='op'>|</span> <span class='const'>JSON</span><span class='period'>.</span><span class='id identifier rubyid_parse'>parse</span><span class='lparen'>(</span><span class='id identifier rubyid_f'>f</span><span class='period'>.</span><span class='id identifier rubyid_read'>read</span><span class='rparen'>)</span> <span class='rbrace'>}</span>
  <span class='ivar'>@range_arr</span> <span class='op'>=</span> <span class='const'>File</span><span class='period'>.</span><span class='id identifier rubyid_open'>open</span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>&quot;</span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_path'>path</span><span class='embexpr_end'>}</span><span class='tstring_content'>/range_arr.json</span><span class='tstring_end'>&quot;</span></span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>r</span><span class='tstring_end'>&#39;</span></span><span class='rparen'>)</span> <span class='lbrace'>{</span> <span class='op'>|</span><span class='id identifier rubyid_f'>f</span><span class='op'>|</span> <span class='const'>JSON</span><span class='period'>.</span><span class='id identifier rubyid_parse'>parse</span><span class='lparen'>(</span><span class='id identifier rubyid_f'>f</span><span class='period'>.</span><span class='id identifier rubyid_read'>read</span><span class='rparen'>)</span> <span class='rbrace'>}</span>
  <span class='ivar'>@range_arr</span><span class='period'>.</span><span class='id identifier rubyid_map!'>map!</span><span class='lbrace'>{</span><span class='op'>|</span><span class='id identifier rubyid_range_element'>range_element</span><span class='op'>|</span> <span class='id identifier rubyid_string2range'>string2range</span><span class='lparen'>(</span><span class='id identifier rubyid_range_element'>range_element</span><span class='rparen'>)</span> <span class='rbrace'>}</span>
  <span class='ivar'>@rel_arr</span> <span class='op'>=</span> <span class='const'>File</span><span class='period'>.</span><span class='id identifier rubyid_open'>open</span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>&quot;</span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_path'>path</span><span class='embexpr_end'>}</span><span class='tstring_content'>/rel_arr.json</span><span class='tstring_end'>&quot;</span></span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>r</span><span class='tstring_end'>&#39;</span></span><span class='rparen'>)</span> <span class='lbrace'>{</span> <span class='op'>|</span><span class='id identifier rubyid_f'>f</span><span class='op'>|</span> <span class='const'>JSON</span><span class='period'>.</span><span class='id identifier rubyid_parse'>parse</span><span class='lparen'>(</span><span class='id identifier rubyid_f'>f</span><span class='period'>.</span><span class='id identifier rubyid_read'>read</span><span class='rparen'>)</span> <span class='rbrace'>}</span>
  <span class='id identifier rubyid_sliced_range_arr'>sliced_range_arr</span> <span class='op'>=</span> <span class='ivar'>@range_arr</span><span class='lbracket'>[</span><span class='id identifier rubyid_partition_id'>partition_id</span><span class='rbracket'>]</span><span class='period'>.</span><span class='id identifier rubyid_to_a'>to_a</span><span class='period'>.</span><span class='id identifier rubyid_map'>map</span> <span class='lbrace'>{</span> <span class='op'>|</span><span class='id identifier rubyid_range_element'>range_element</span><span class='op'>|</span> <span class='id identifier rubyid_range_element'>range_element</span> <span class='rbrace'>}</span>
  <span class='id identifier rubyid_partition_data'>partition_data</span> <span class='op'>=</span> <span class='const'>File</span><span class='period'>.</span><span class='id identifier rubyid_open'>open</span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>&quot;</span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_path'>path</span><span class='embexpr_end'>}</span><span class='tstring_content'>/</span><span class='embexpr_beg'>#{</span><span class='ivar'>@db_name</span><span class='embexpr_end'>}</span><span class='tstring_content'>_part_</span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_partition_id'>partition_id</span><span class='embexpr_end'>}</span><span class='tstring_content'>.json</span><span class='tstring_end'>&quot;</span></span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>r</span><span class='tstring_end'>&#39;</span></span><span class='rparen'>)</span> <span class='lbrace'>{</span> <span class='op'>|</span><span class='id identifier rubyid_f'>f</span><span class='op'>|</span> <span class='const'>JSON</span><span class='period'>.</span><span class='id identifier rubyid_parse'>parse</span><span class='lparen'>(</span><span class='id identifier rubyid_f'>f</span><span class='period'>.</span><span class='id identifier rubyid_read'>read</span><span class='rparen'>)</span> <span class='rbrace'>}</span>
  <span class='lparen'>(</span><span class='lparen'>(</span><span class='id identifier rubyid_sliced_range_arr'>sliced_range_arr</span><span class='lbracket'>[</span><span class='int'>0</span><span class='rbracket'>]</span><span class='period'>.</span><span class='id identifier rubyid_to_i'>to_i</span><span class='rparen'>)</span><span class='op'>..</span><span class='lparen'>(</span><span class='id identifier rubyid_sliced_range_arr'>sliced_range_arr</span><span class='lbracket'>[</span><span class='op'>-</span><span class='int'>1</span><span class='rbracket'>]</span><span class='period'>.</span><span class='id identifier rubyid_to_i'>to_i</span><span class='rparen'>)</span><span class='rparen'>)</span><span class='period'>.</span><span class='id identifier rubyid_to_a'>to_a</span><span class='period'>.</span><span class='id identifier rubyid_each'>each</span> <span class='kw'>do</span> <span class='op'>|</span><span class='id identifier rubyid_range_element'>range_element</span><span class='op'>|</span>
    <span class='ivar'>@data_arr</span><span class='lbracket'>[</span><span class='id identifier rubyid_range_element'>range_element</span><span class='rbracket'>]</span> <span class='op'>=</span> <span class='id identifier rubyid_partition_data'>partition_data</span><span class='lbracket'>[</span><span class='id identifier rubyid_range_element'>range_element</span><span class='rbracket'>]</span>
  <span class='kw'>end</span>
  <span class='ivar'>@data_arr</span><span class='lbracket'>[</span><span class='ivar'>@range_arr</span><span class='lbracket'>[</span><span class='id identifier rubyid_partition_id'>partition_id</span><span class='rbracket'>]</span><span class='rbracket'>]</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="mkdir_bindir-instance_method">
  
    #<strong>mkdir_bindir</strong>(path)  &#x21d2; <tt>Object</tt> 
  

  

  
</h3><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


521
522
523</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/dr/partitioned_array.rb', line 521</span>

<span class='kw'>def</span> <span class='id identifier rubyid_mkdir_bindir'><span class='object_link'><a href="top-level-namespace.html#mkdir_bindir-instance_method" title="#mkdir_bindir (method)">mkdir_bindir</a></span></span><span class='lparen'>(</span><span class='id identifier rubyid_path'>path</span><span class='rparen'>)</span>
  <span class='gvar'>$gtk</span><span class='period'>.</span><span class='id identifier rubyid_system'>system</span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>cmd /c mkdir \&quot;</span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_pwd'><span class='object_link'><a href="top-level-namespace.html#pwd-instance_method" title="#pwd (method)">pwd</a></span></span><span class='embexpr_end'>}</span><span class='tstring_content'>\\</span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_path'>path</span><span class='embexpr_end'>}</span><span class='tstring_content'>\&quot;</span><span class='tstring_end'>&quot;</span></span><span class='rparen'>)</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="range_db_get-instance_method">
  
    #<strong>range_db_get</strong>(range_arr, db_num)  &#x21d2; <tt>Object</tt> 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    
<p>LABEL_INTEGER LABEL_RANGES end here</p>


  </div>
</div>
<div class="tags">
  

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


59
60
61</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/all.rb', line 59</span>

<span class='kw'>def</span> <span class='id identifier rubyid_range_db_get'>range_db_get</span><span class='lparen'>(</span><span class='id identifier rubyid_range_arr'>range_arr</span><span class='comma'>,</span> <span class='id identifier rubyid_db_num'>db_num</span><span class='rparen'>)</span>
  <span class='id identifier rubyid_range_arr'>range_arr</span><span class='lbracket'>[</span><span class='id identifier rubyid_db_num'>db_num</span><span class='rbracket'>]</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="save_all_to_files!-instance_method">
  
    #<strong>save_all_to_files!</strong>(db_folder: @db_folder, db_path: @db_path, db_name: @db_name)  &#x21d2; <tt>Object</tt> 
  

  

  
</h3><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


321
322
323
324
325
326
327
328
329
330
331
332
333
334
335
336
337
338
339
340
341
342
343
344
345
346
347
348
349
350
351
352
353
354</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/all.rb', line 321</span>

<span class='kw'>def</span> <span class='id identifier rubyid_save_all_to_files!'>save_all_to_files!</span><span class='lparen'>(</span><span class='label'>db_folder:</span> <span class='ivar'>@db_folder</span><span class='comma'>,</span> <span class='label'>db_path:</span> <span class='ivar'>@db_path</span><span class='comma'>,</span> <span class='label'>db_name:</span> <span class='ivar'>@db_name</span><span class='rparen'>)</span>
  
  <span class='kw'>unless</span> <span class='const'>Dir</span><span class='period'>.</span><span class='id identifier rubyid_exist?'>exist?</span><span class='lparen'>(</span><span class='id identifier rubyid_db_path'>db_path</span><span class='rparen'>)</span>
    <span class='const'>Dir</span><span class='period'>.</span><span class='id identifier rubyid_mkdir'>mkdir</span><span class='lparen'>(</span><span class='id identifier rubyid_db_path'>db_path</span><span class='rparen'>)</span>
  <span class='kw'>end</span>
  <span class='id identifier rubyid_path'>path</span> <span class='op'>=</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_db_path'>db_path</span><span class='embexpr_end'>}</span><span class='tstring_content'>/</span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_db_name'>db_name</span><span class='embexpr_end'>}</span><span class='tstring_end'>&quot;</span></span>

  <span class='kw'>unless</span> <span class='const'>Dir</span><span class='period'>.</span><span class='id identifier rubyid_exist?'>exist?</span><span class='lparen'>(</span><span class='id identifier rubyid_path'>path</span><span class='rparen'>)</span>
    <span class='const'>Dir</span><span class='period'>.</span><span class='id identifier rubyid_mkdir'>mkdir</span><span class='lparen'>(</span><span class='id identifier rubyid_path'>path</span><span class='rparen'>)</span>
  <span class='kw'>end</span>

  <span class='id identifier rubyid_save_partition_addition_amount_to_file!'>save_partition_addition_amount_to_file!</span>
  <span class='id identifier rubyid_save_dynamically_allocates_to_file!'>save_dynamically_allocates_to_file!</span>
  <span class='const'>File</span><span class='period'>.</span><span class='id identifier rubyid_open'>open</span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>&quot;</span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_path'>path</span><span class='embexpr_end'>}</span><span class='tstring_content'>/</span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_db_folder'>db_folder</span><span class='embexpr_end'>}</span><span class='tstring_content'>/partition_amount_and_offset.json</span><span class='tstring_end'>&quot;</span></span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>w</span><span class='tstring_end'>&#39;</span></span><span class='rparen'>)</span><span class='lbrace'>{</span><span class='op'>|</span><span class='id identifier rubyid_f'>f</span><span class='op'>|</span> <span class='id identifier rubyid_f'>f</span><span class='period'>.</span><span class='id identifier rubyid_write'>write</span><span class='lparen'>(</span><span class='ivar'>@partition_amount_and_offset</span><span class='period'>.</span><span class='id identifier rubyid_to_json'>to_json</span><span class='rparen'>)</span> <span class='rbrace'>}</span>
  <span class='const'>File</span><span class='period'>.</span><span class='id identifier rubyid_open'>open</span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>&quot;</span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_path'>path</span><span class='embexpr_end'>}</span><span class='tstring_content'>/</span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_db_folder'>db_folder</span><span class='embexpr_end'>}</span><span class='tstring_content'>/range_arr.json</span><span class='tstring_end'>&quot;</span></span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>w</span><span class='tstring_end'>&#39;</span></span><span class='rparen'>)</span><span class='lbrace'>{</span><span class='op'>|</span><span class='id identifier rubyid_f'>f</span><span class='op'>|</span> <span class='id identifier rubyid_f'>f</span><span class='period'>.</span><span class='id identifier rubyid_write'>write</span><span class='lparen'>(</span><span class='ivar'>@range_arr</span><span class='period'>.</span><span class='id identifier rubyid_to_json'>to_json</span><span class='rparen'>)</span> <span class='rbrace'>}</span>
  <span class='const'>File</span><span class='period'>.</span><span class='id identifier rubyid_open'>open</span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>&quot;</span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_path'>path</span><span class='embexpr_end'>}</span><span class='tstring_content'>/</span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_db_folder'>db_folder</span><span class='embexpr_end'>}</span><span class='tstring_content'>/rel_arr.json</span><span class='tstring_end'>&quot;</span></span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>w</span><span class='tstring_end'>&#39;</span></span><span class='rparen'>)</span><span class='lbrace'>{</span><span class='op'>|</span><span class='id identifier rubyid_f'>f</span><span class='op'>|</span> <span class='id identifier rubyid_f'>f</span><span class='period'>.</span><span class='id identifier rubyid_write'>write</span><span class='lparen'>(</span><span class='ivar'>@rel_arr</span><span class='period'>.</span><span class='id identifier rubyid_to_json'>to_json</span><span class='rparen'>)</span> <span class='rbrace'>}</span>
  <span class='const'>File</span><span class='period'>.</span><span class='id identifier rubyid_open'>open</span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>&quot;</span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_path'>path</span><span class='embexpr_end'>}</span><span class='tstring_content'>/</span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_db_folder'>db_folder</span><span class='embexpr_end'>}</span><span class='tstring_content'>/db_size.json</span><span class='tstring_end'>&quot;</span></span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>w</span><span class='tstring_end'>&#39;</span></span><span class='rparen'>)</span><span class='lbrace'>{</span><span class='op'>|</span><span class='id identifier rubyid_f'>f</span><span class='op'>|</span> <span class='id identifier rubyid_f'>f</span><span class='period'>.</span><span class='id identifier rubyid_write'>write</span><span class='lparen'>(</span><span class='ivar'>@db_size</span><span class='period'>.</span><span class='id identifier rubyid_to_json'>to_json</span><span class='rparen'>)</span> <span class='rbrace'>}</span>
  <span class='id identifier rubyid_debug'>debug</span> <span class='id identifier rubyid_path'>path</span>
  <span class='int'>0</span><span class='period'>.</span><span class='id identifier rubyid_upto'>upto</span><span class='lparen'>(</span><span class='ivar'>@db_size</span><span class='op'>-</span><span class='int'>1</span><span class='rparen'>)</span> <span class='kw'>do</span> <span class='op'>|</span><span class='id identifier rubyid_index'>index</span><span class='op'>|</span>
    <span class='const'>FileUtils</span><span class='period'>.</span><span class='id identifier rubyid_touch'>touch</span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>&quot;</span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_path'>path</span><span class='embexpr_end'>}</span><span class='tstring_content'>/</span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_db_folder'>db_folder</span><span class='embexpr_end'>}</span><span class='tstring_content'>/</span><span class='embexpr_beg'>#{</span><span class='ivar'>@db_name</span><span class='embexpr_end'>}</span><span class='tstring_content'>_part_</span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_index'>index</span><span class='embexpr_end'>}</span><span class='tstring_content'>.json</span><span class='tstring_end'>&quot;</span></span><span class='rparen'>)</span>
    <span class='const'>File</span><span class='period'>.</span><span class='id identifier rubyid_open'>open</span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>&quot;</span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_path'>path</span><span class='embexpr_end'>}</span><span class='tstring_content'>/</span><span class='embexpr_beg'>#{</span><span class='ivar'>@db_name</span><span class='embexpr_end'>}</span><span class='tstring_content'>_part_</span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_index'>index</span><span class='embexpr_end'>}</span><span class='tstring_content'>.json</span><span class='tstring_end'>&quot;</span></span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>w</span><span class='tstring_end'>&#39;</span></span><span class='rparen'>)</span> <span class='kw'>do</span> <span class='op'>|</span><span class='id identifier rubyid_f'>f</span><span class='op'>|</span>
      <span class='id identifier rubyid_partition'>partition</span> <span class='op'>=</span> <span class='id identifier rubyid_get_partition'>get_partition</span><span class='lparen'>(</span><span class='id identifier rubyid_index'>index</span><span class='rparen'>)</span>
      <span class='id identifier rubyid_debug_and_pause'>debug_and_pause</span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>partition index: </span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_index'>index</span><span class='embexpr_end'>}</span><span class='tstring_end'>&quot;</span></span><span class='rparen'>)</span>
      <span class='id identifier rubyid_debug'>debug</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>partition index: </span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_index'>index</span><span class='embexpr_end'>}</span><span class='tstring_end'>&quot;</span></span>
      <span class='id identifier rubyid_debug'>debug</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>@db_size: </span><span class='embexpr_beg'>#{</span><span class='ivar'>@db_size</span><span class='embexpr_end'>}</span><span class='tstring_end'>&quot;</span></span>
      <span class='id identifier rubyid_debug'>debug</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>partition: </span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_partition'>partition</span><span class='embexpr_end'>}</span><span class='tstring_end'>&quot;</span></span>
      <span class='id identifier rubyid_debug'>debug</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>@rel_arr: </span><span class='embexpr_beg'>#{</span><span class='ivar'>@rel_arr</span><span class='embexpr_end'>}</span><span class='tstring_end'>&quot;</span></span>
      <span class='id identifier rubyid_debug'>debug</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>@range_arr: </span><span class='embexpr_beg'>#{</span><span class='ivar'>@range_arr</span><span class='embexpr_end'>}</span><span class='tstring_end'>&quot;</span></span>
      <span class='id identifier rubyid_debug'>debug</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>@data_arr: </span><span class='embexpr_beg'>#{</span><span class='ivar'>@data_arr</span><span class='period'>.</span><span class='id identifier rubyid_size'>size</span><span class='embexpr_end'>}</span><span class='tstring_end'>&quot;</span></span>
      <span class='id identifier rubyid_debug'>debug</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>@data_arr: </span><span class='embexpr_beg'>#{</span><span class='ivar'>@data_arr</span><span class='embexpr_end'>}</span><span class='tstring_end'>&quot;</span></span>
      <span class='id identifier rubyid_f'>f</span><span class='period'>.</span><span class='id identifier rubyid_write'>write</span><span class='lparen'>(</span><span class='id identifier rubyid_partition'>partition</span><span class='period'>.</span><span class='id identifier rubyid_to_json'>to_json</span><span class='rparen'>)</span>
    <span class='kw'>end</span>
  <span class='kw'>end</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="save_dynamically_allocates_to_file!-instance_method">
  
    #<strong>save_dynamically_allocates_to_file!</strong>  &#x21d2; <tt>Object</tt> 
  

  

  
</h3><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


82
83
84
85
86
87
88</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/all.rb', line 82</span>

<span class='kw'>def</span> <span class='id identifier rubyid_save_dynamically_allocates_to_file!'>save_dynamically_allocates_to_file!</span>
  <span class='comment'>#puts &quot;in PA: @dynamically_allocates = #{@dynamically_allocates}&quot; 
</span>  <span class='const'>FileUtils</span><span class='period'>.</span><span class='id identifier rubyid_touch'>touch</span><span class='lparen'>(</span><span class='ivar'>@db_path</span> <span class='op'>+</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>/</span><span class='tstring_end'>&#39;</span></span> <span class='op'>+</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>dynamically_allocates.json</span><span class='tstring_end'>&#39;</span></span><span class='rparen'>)</span>
  <span class='const'>File</span><span class='period'>.</span><span class='id identifier rubyid_open'>open</span><span class='lparen'>(</span><span class='ivar'>@db_path</span> <span class='op'>+</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>/</span><span class='tstring_end'>&#39;</span></span> <span class='op'>+</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>dynamically_allocates.json</span><span class='tstring_end'>&#39;</span></span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>w</span><span class='tstring_end'>&#39;</span></span><span class='rparen'>)</span> <span class='kw'>do</span> <span class='op'>|</span><span class='id identifier rubyid_file'>file</span><span class='op'>|</span>
    <span class='id identifier rubyid_file'>file</span><span class='period'>.</span><span class='id identifier rubyid_write'>write</span><span class='lparen'>(</span><span class='ivar'>@dynamically_allocates</span><span class='period'>.</span><span class='id identifier rubyid_to_json'>to_json</span><span class='rparen'>)</span>
  <span class='kw'>end</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="save_partition_addition_amount_to_file!-instance_method">
  
    #<strong>save_partition_addition_amount_to_file!</strong>(db_folder: @db_folder)  &#x21d2; <tt>Object</tt> 
  

  

  
</h3><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


310
311
312
313
314</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/all.rb', line 310</span>

<span class='kw'>def</span> <span class='id identifier rubyid_save_partition_addition_amount_to_file!'>save_partition_addition_amount_to_file!</span><span class='lparen'>(</span><span class='label'>db_folder:</span> <span class='ivar'>@db_folder</span><span class='rparen'>)</span>
  <span class='id identifier rubyid_path'>path</span> <span class='op'>=</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='embexpr_beg'>#{</span><span class='ivar'>@db_path</span><span class='embexpr_end'>}</span><span class='tstring_content'>/</span><span class='embexpr_beg'>#{</span><span class='ivar'>@db_name</span><span class='embexpr_end'>}</span><span class='tstring_end'>&quot;</span></span>
  <span class='const'>FileUtils</span><span class='period'>.</span><span class='id identifier rubyid_touch'>touch</span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>&quot;</span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_path'>path</span><span class='embexpr_end'>}</span><span class='tstring_content'>/</span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_db_folder'>db_folder</span><span class='embexpr_end'>}</span><span class='tstring_content'>/partition_addition_amount.json</span><span class='tstring_end'>&quot;</span></span><span class='rparen'>)</span>
  <span class='const'>File</span><span class='period'>.</span><span class='id identifier rubyid_open'>open</span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>&quot;</span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_path'>path</span><span class='embexpr_end'>}</span><span class='tstring_content'>/</span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_db_folder'>db_folder</span><span class='embexpr_end'>}</span><span class='tstring_content'>/partition_addition_amount.json</span><span class='tstring_end'>&quot;</span></span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>w</span><span class='tstring_end'>&#39;</span></span><span class='rparen'>)</span> <span class='lbrace'>{</span> <span class='op'>|</span><span class='id identifier rubyid_f'>f</span><span class='op'>|</span> <span class='id identifier rubyid_f'>f</span><span class='period'>.</span><span class='id identifier rubyid_write'>write</span><span class='lparen'>(</span><span class='ivar'>@partition_amount_and_offset</span><span class='period'>.</span><span class='id identifier rubyid_to_json'>to_json</span><span class='rparen'>)</span> <span class='rbrace'>}</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="save_partition_to_file!-instance_method">
  
    #<strong>save_partition_to_file!</strong>(partition_id, db_folder: @db_folder)  &#x21d2; <tt>Object</tt> 
  

  

  
</h3><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


304
305
306
307
308</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/all.rb', line 304</span>

<span class='kw'>def</span> <span class='id identifier rubyid_save_partition_to_file!'>save_partition_to_file!</span><span class='lparen'>(</span><span class='id identifier rubyid_partition_id'>partition_id</span><span class='comma'>,</span> <span class='label'>db_folder:</span> <span class='ivar'>@db_folder</span><span class='rparen'>)</span>
  <span class='id identifier rubyid_partition_data'>partition_data</span> <span class='op'>=</span> <span class='id identifier rubyid_get_partition'>get_partition</span><span class='lparen'>(</span><span class='id identifier rubyid_partition_id'>partition_id</span><span class='rparen'>)</span>
  <span class='id identifier rubyid_path'>path</span> <span class='op'>=</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='embexpr_beg'>#{</span><span class='ivar'>@db_path</span><span class='embexpr_end'>}</span><span class='tstring_content'>/</span><span class='embexpr_beg'>#{</span><span class='ivar'>@db_name</span><span class='embexpr_end'>}</span><span class='tstring_end'>&quot;</span></span>
  <span class='const'>File</span><span class='period'>.</span><span class='id identifier rubyid_open'>open</span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>&quot;</span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_path'>path</span><span class='embexpr_end'>}</span><span class='tstring_content'>/</span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_db_folder'>db_folder</span><span class='embexpr_end'>}</span><span class='tstring_content'>/</span><span class='embexpr_beg'>#{</span><span class='ivar'>@db_name</span><span class='embexpr_end'>}</span><span class='tstring_content'>_part_</span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_partition_id'>partition_id</span><span class='embexpr_end'>}</span><span class='tstring_content'>.json</span><span class='tstring_end'>&quot;</span></span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>w</span><span class='tstring_end'>&#39;</span></span><span class='rparen'>)</span> <span class='lbrace'>{</span> <span class='op'>|</span><span class='id identifier rubyid_f'>f</span><span class='op'>|</span> <span class='id identifier rubyid_f'>f</span><span class='period'>.</span><span class='id identifier rubyid_write'>write</span><span class='lparen'>(</span><span class='id identifier rubyid_partition_data'>partition_data</span><span class='period'>.</span><span class='id identifier rubyid_to_json'>to_json</span><span class='rparen'>)</span> <span class='rbrace'>}</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="set-instance_method">
  
    #<strong>set</strong>(id, &amp;block)  &#x21d2; <tt>Object</tt> 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    
<p>TODO: Class#set(integer id) -&gt; boolean Will yield a hash to some element id within the data array, to which you could use a block and modify said data</p>


  </div>
</div>
<div class="tags">
  

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


290
291
292
293
294
295
296
297
298
299
300
301
302
303
304
305</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/partitioned_array.rb', line 290</span>

<span class='kw'>def</span> <span class='id identifier rubyid_set'>set</span><span class='lparen'>(</span><span class='id identifier rubyid_id'>id</span><span class='comma'>,</span> <span class='op'>&amp;</span><span class='id identifier rubyid_block'>block</span><span class='rparen'>)</span>
  <span class='kw'>if</span> <span class='id identifier rubyid_id'>id</span> <span class='op'>&lt;=</span> <span class='ivar'>@db_size</span> <span class='op'>-</span> <span class='int'>1</span>
    <span class='kw'>if</span> <span class='id identifier rubyid_block_given?'>block_given?</span> <span class='op'>&amp;&amp;</span> <span class='ivar'>@data_arr</span><span class='lbracket'>[</span><span class='id identifier rubyid_id'>id</span><span class='rbracket'>]</span><span class='period'>.</span><span class='id identifier rubyid_instance_of?'>instance_of?</span><span class='lparen'>(</span><span class='const'>Hash</span><span class='rparen'>)</span>
      <span class='id identifier rubyid_block'>block</span><span class='period'>.</span><span class='id identifier rubyid_call'>call</span><span class='lparen'>(</span><span class='ivar'>@data_arr</span><span class='lbracket'>[</span><span class='id identifier rubyid_id'>id</span><span class='rbracket'>]</span><span class='rparen'>)</span> <span class='comment'># put the openstruct into the block as an argument
</span>      <span class='comment'># @data_arr[id] = data
</span>      <span class='id identifier rubyid_debug'>debug</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>block given</span><span class='tstring_end'>&quot;</span></span>
    <span class='kw'>elsif</span> <span class='id identifier rubyid_block_given?'>block_given?</span> <span class='op'>&amp;&amp;</span> <span class='ivar'>@data_arr</span><span class='lbracket'>[</span><span class='id identifier rubyid_id'>id</span><span class='rbracket'>]</span><span class='period'>.</span><span class='id identifier rubyid_nil?'>nil?</span>
      <span class='comment'># this element in particular must have been turned off; every initial element is an OpenStruct and nil if that partition was deactivated
</span>      <span class='id identifier rubyid_debug'>debug</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>Loading array element </span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_id'>id</span><span class='embexpr_end'>}</span><span class='tstring_content'> from nil</span><span class='tstring_end'>&quot;</span></span>
      <span class='ivar'>@data_arr</span><span class='lbracket'>[</span><span class='id identifier rubyid_id'>id</span><span class='rbracket'>]</span> <span class='op'>=</span> <span class='lbrace'>{</span><span class='rbrace'>}</span>
      <span class='id identifier rubyid_block'>block</span><span class='period'>.</span><span class='id identifier rubyid_call'>call</span><span class='lparen'>(</span><span class='ivar'>@data_arr</span><span class='lbracket'>[</span><span class='id identifier rubyid_id'>id</span><span class='rbracket'>]</span><span class='rparen'>)</span>
    <span class='kw'>else</span>
      <span class='id identifier rubyid_raise'>raise</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>No block given for element </span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_id'>id</span><span class='embexpr_end'>}</span><span class='tstring_end'>&quot;</span></span>
    <span class='kw'>end</span>
  <span class='kw'>end</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="set_partition_subelement-instance_method">
  
    #<strong>set_partition_subelement</strong>(id, partition_id, &amp;block)  &#x21d2; <tt>Object</tt> 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    
<p>set the partition’s array element to what is specified</p>


  </div>
</div>
<div class="tags">
  

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


251
252
253
254
255
256
257
258
259
260
261
262
263
264
265
266
267</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/partitioned_array.rb', line 251</span>

<span class='kw'>def</span> <span class='id identifier rubyid_set_partition_subelement'>set_partition_subelement</span><span class='lparen'>(</span><span class='id identifier rubyid_id'>id</span><span class='comma'>,</span> <span class='id identifier rubyid_partition_id'>partition_id</span><span class='comma'>,</span> <span class='op'>&amp;</span><span class='id identifier rubyid_block'>block</span><span class='rparen'>)</span>
  <span class='id identifier rubyid_set_successfully'>set_successfully</span> <span class='op'>=</span> <span class='kw'>false</span>
  <span class='comment'># set the partition&#39;s array element to what is specified
</span>  <span class='id identifier rubyid_partition'>partition</span> <span class='op'>=</span> <span class='id identifier rubyid_get_partition'>get_partition</span><span class='lparen'>(</span><span class='id identifier rubyid_partition_id'>partition_id</span><span class='rparen'>)</span>
  <span class='kw'>if</span> <span class='id identifier rubyid_id'>id</span> <span class='op'>&lt;=</span> <span class='lparen'>(</span><span class='ivar'>@data_arr</span><span class='period'>.</span><span class='id identifier rubyid_size'>size</span> <span class='op'>-</span> <span class='int'>1</span><span class='rparen'>)</span> <span class='op'>&amp;&amp;</span> <span class='id identifier rubyid_partition'>partition</span>
    <span class='kw'>if</span> <span class='id identifier rubyid_block_given?'>block_given?</span> <span class='op'>&amp;&amp;</span> <span class='id identifier rubyid_partition'>partition</span><span class='lbracket'>[</span><span class='id identifier rubyid_id'>id</span><span class='rbracket'>]</span><span class='period'>.</span><span class='id identifier rubyid_instance_of?'>instance_of?</span><span class='lparen'>(</span><span class='const'>Hash</span><span class='rparen'>)</span>
      <span class='id identifier rubyid_block'>block</span><span class='period'>.</span><span class='id identifier rubyid_call'>call</span><span class='lparen'>(</span><span class='id identifier rubyid_partition'>partition</span><span class='lbracket'>[</span><span class='id identifier rubyid_id'>id</span><span class='rbracket'>]</span><span class='rparen'>)</span>
      <span class='id identifier rubyid_set_successfully'>set_successfully</span> <span class='op'>=</span> <span class='kw'>true</span>
    <span class='kw'>elsif</span> <span class='lparen'>(</span><span class='id identifier rubyid_id'>id</span> <span class='op'>&lt;=</span> <span class='ivar'>@data_arr</span><span class='period'>.</span><span class='id identifier rubyid_size'>size</span> <span class='op'>-</span> <span class='int'>1</span><span class='rparen'>)</span> <span class='op'>&amp;&amp;</span> <span class='id identifier rubyid_partition'>partition</span><span class='lbracket'>[</span><span class='id identifier rubyid_id'>id</span><span class='rbracket'>]</span><span class='period'>.</span><span class='id identifier rubyid_nil?'>nil?</span> <span class='op'>&amp;&amp;</span> <span class='id identifier rubyid_block_given?'>block_given?</span>
      <span class='ivar'>@data_arr</span><span class='lbracket'>[</span><span class='ivar'>@range_arr</span><span class='lbracket'>[</span><span class='id identifier rubyid_partition_id'>partition_id</span><span class='rbracket'>]</span><span class='period'>.</span><span class='id identifier rubyid_to_a'>to_a</span><span class='lbracket'>[</span><span class='id identifier rubyid_id'>id</span><span class='rbracket'>]</span><span class='rbracket'>]</span> <span class='op'>=</span> <span class='lbrace'>{</span><span class='rbrace'>}</span>
      <span class='id identifier rubyid_debug'>debug</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>d_arr: </span><span class='embexpr_beg'>#{</span><span class='ivar'>@data_arr</span><span class='lbracket'>[</span><span class='ivar'>@range_arr</span><span class='lbracket'>[</span><span class='id identifier rubyid_partition_id'>partition_id</span><span class='rbracket'>]</span><span class='period'>.</span><span class='id identifier rubyid_to_a'>to_a</span><span class='lbracket'>[</span><span class='id identifier rubyid_id'>id</span><span class='rbracket'>]</span><span class='rbracket'>]</span><span class='embexpr_end'>}</span><span class='tstring_end'>&quot;</span></span>
      <span class='id identifier rubyid_block'>block</span><span class='period'>.</span><span class='id identifier rubyid_call'>call</span><span class='lparen'>(</span><span class='ivar'>@data_arr</span><span class='lbracket'>[</span><span class='ivar'>@range_arr</span><span class='lbracket'>[</span><span class='id identifier rubyid_partition_id'>partition_id</span><span class='rbracket'>]</span><span class='period'>.</span><span class='id identifier rubyid_to_a'>to_a</span><span class='lbracket'>[</span><span class='id identifier rubyid_id'>id</span><span class='rbracket'>]</span><span class='rbracket'>]</span><span class='rparen'>)</span>
      <span class='id identifier rubyid_set_successfully'>set_successfully</span> <span class='op'>=</span> <span class='kw'>true</span>
    <span class='kw'>end</span>
  <span class='kw'>end</span>
  <span class='id identifier rubyid_set_successfully'>set_successfully</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="string2range-instance_method">
  
    #<strong>string2range</strong>(range_string)  &#x21d2; <tt>Object</tt> 
  

  

  
</h3><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


253
254
255
256</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/all.rb', line 253</span>

<span class='kw'>def</span> <span class='id identifier rubyid_string2range'>string2range</span><span class='lparen'>(</span><span class='id identifier rubyid_range_string'>range_string</span><span class='rparen'>)</span>
  <span class='id identifier rubyid_split_range'>split_range</span> <span class='op'>=</span> <span class='id identifier rubyid_range_string'>range_string</span><span class='period'>.</span><span class='id identifier rubyid_split'>split</span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>..</span><span class='tstring_end'>&quot;</span></span><span class='rparen'>)</span>
  <span class='id identifier rubyid_split_range'>split_range</span><span class='lbracket'>[</span><span class='int'>0</span><span class='rbracket'>]</span><span class='period'>.</span><span class='id identifier rubyid_to_i'>to_i</span><span class='op'>..</span><span class='id identifier rubyid_split_range'>split_range</span><span class='lbracket'>[</span><span class='int'>1</span><span class='rbracket'>]</span><span class='period'>.</span><span class='id identifier rubyid_to_i'>to_i</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
  </div>

</div>

      <div id="footer">
  Generated on Fri Mar 31 16:01:16 2023 by
  <a href="https://yardoc.org" title="Yay! A Ruby Documentation Tool" target="_parent">yard</a>
  0.9.28 (ruby-3.2.1).
</div>

    </div>
  </body>
</html>