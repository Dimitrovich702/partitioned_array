<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>
  Class: PartitionedArrayDR
  
    &mdash; Documentation by YARD 0.9.28
  
</title>

  <link rel="stylesheet" href="css/style.css" type="text/css" />

  <link rel="stylesheet" href="css/common.css" type="text/css" />

<script type="text/javascript">
  pathId = "PartitionedArrayDR";
  relpath = '';
</script>


  <script type="text/javascript" charset="utf-8" src="js/jquery.js"></script>

  <script type="text/javascript" charset="utf-8" src="js/app.js"></script>


  </head>
  <body>
    <div class="nav_wrap">
      <iframe id="nav" src="class_list.html?1"></iframe>
      <div id="resizer"></div>
    </div>

    <div id="main" tabindex="-1">
      <div id="header">
        <div id="menu">
  
    <a href="_index.html">Index (P)</a> &raquo;
    
    
    <span class="title">PartitionedArrayDR</span>
  
</div>

        <div id="search">
  
    <a class="full_list_link" id="class_list_link"
        href="class_list.html">

        <svg width="24" height="24">
          <rect x="0" y="4" width="24" height="4" rx="1" ry="1"></rect>
          <rect x="0" y="12" width="24" height="4" rx="1" ry="1"></rect>
          <rect x="0" y="20" width="24" height="4" rx="1" ry="1"></rect>
        </svg>
    </a>
  
</div>
        <div class="clear"></div>
      </div>

      <div id="content"><h1>Class: PartitionedArrayDR
  
  
  
</h1>
<div class="box_info">
  
  <dl>
    <dt>Inherits:</dt>
    <dd>
      <span class="inheritName"><span class='object_link'><a href="PartitionedArray.html" title="PartitionedArray (class)">PartitionedArray</a></span></span>
      
        <ul class="fullTree">
          <li>Object</li>
          
            <li class="next"><span class='object_link'><a href="PartitionedArray.html" title="PartitionedArray (class)">PartitionedArray</a></span></li>
          
            <li class="next">PartitionedArrayDR</li>
          
        </ul>
        <a href="#" class="inheritanceTree">show all</a>
      
    </dd>
  </dl>
  

  
  
  
  
  

  

  
  <dl>
    <dt>Defined in:</dt>
    <dd>lib/dragonruby_pure_partitioned_array/partitioned_array_dr.rb</dd>
  </dl>
  
</div>




  <h2>Constant Summary</h2>
  
  <h3 class="inherited">Constants inherited
     from <span class='object_link'><a href="PartitionedArray.html" title="PartitionedArray (class)">PartitionedArray</a></span></h3>
  <p class="inherited"><span class='object_link'><a href="PartitionedArray.html#DB_NAME-constant" title="PartitionedArray::DB_NAME (constant)">PartitionedArray::DB_NAME</a></span>, <span class='object_link'><a href="PartitionedArray.html#DB_SIZE-constant" title="PartitionedArray::DB_SIZE (constant)">PartitionedArray::DB_SIZE</a></span>, <span class='object_link'><a href="PartitionedArray.html#DEBUGGING-constant" title="PartitionedArray::DEBUGGING (constant)">PartitionedArray::DEBUGGING</a></span>, <span class='object_link'><a href="PartitionedArray.html#DEFAULT_PATH-constant" title="PartitionedArray::DEFAULT_PATH (constant)">PartitionedArray::DEFAULT_PATH</a></span>, <span class='object_link'><a href="PartitionedArray.html#DYNAMICALLY_ALLOCATES-constant" title="PartitionedArray::DYNAMICALLY_ALLOCATES (constant)">PartitionedArray::DYNAMICALLY_ALLOCATES</a></span>, <span class='object_link'><a href="PartitionedArray.html#LABEL_INTEGER-constant" title="PartitionedArray::LABEL_INTEGER (constant)">PartitionedArray::LABEL_INTEGER</a></span>, <span class='object_link'><a href="PartitionedArray.html#LABEL_RANGES-constant" title="PartitionedArray::LABEL_RANGES (constant)">PartitionedArray::LABEL_RANGES</a></span>, <span class='object_link'><a href="PartitionedArray.html#OFFSET-constant" title="PartitionedArray::OFFSET (constant)">PartitionedArray::OFFSET</a></span>, <span class='object_link'><a href="PartitionedArray.html#PARTITION_ADDITION_AMOUNT-constant" title="PartitionedArray::PARTITION_ADDITION_AMOUNT (constant)">PartitionedArray::PARTITION_ADDITION_AMOUNT</a></span>, <span class='object_link'><a href="PartitionedArray.html#PARTITION_AMOUNT-constant" title="PartitionedArray::PARTITION_AMOUNT (constant)">PartitionedArray::PARTITION_AMOUNT</a></span>, <span class='object_link'><a href="PartitionedArray.html#PAUSE_DEBUG-constant" title="PartitionedArray::PAUSE_DEBUG (constant)">PartitionedArray::PAUSE_DEBUG</a></span></p>




  <h2>Instance Attribute Summary</h2>
  
  <h3 class="inherited">Attributes inherited from <span class='object_link'><a href="PartitionedArray.html" title="PartitionedArray (class)">PartitionedArray</a></span></h3>
  <p class="inherited"><span class='object_link'><a href="PartitionedArray.html#data_arr-instance_method" title="PartitionedArray#data_arr (method)">#data_arr</a></span>, <span class='object_link'><a href="PartitionedArray.html#db_name-instance_method" title="PartitionedArray#db_name (method)">#db_name</a></span>, <span class='object_link'><a href="PartitionedArray.html#db_path-instance_method" title="PartitionedArray#db_path (method)">#db_path</a></span>, <span class='object_link'><a href="PartitionedArray.html#db_size-instance_method" title="PartitionedArray#db_size (method)">#db_size</a></span>, <span class='object_link'><a href="PartitionedArray.html#partition_addition_amount-instance_method" title="PartitionedArray#partition_addition_amount (method)">#partition_addition_amount</a></span>, <span class='object_link'><a href="PartitionedArray.html#partition_amount_and_offset-instance_method" title="PartitionedArray#partition_amount_and_offset (method)">#partition_amount_and_offset</a></span>, <span class='object_link'><a href="PartitionedArray.html#range_arr-instance_method" title="PartitionedArray#range_arr (method)">#range_arr</a></span>, <span class='object_link'><a href="PartitionedArray.html#rel_arr-instance_method" title="PartitionedArray#rel_arr (method)">#rel_arr</a></span></p>


  
    <h2>
      Instance Method Summary
      <small><a href="#" class="summary_toggle">collapse</a></small>
    </h2>

    <ul class="summary">
      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#load_dynamically_allocates_from_file!-instance_method" title="#load_dynamically_allocates_from_file! (instance method)">#<strong>load_dynamically_allocates_from_file!</strong>  &#x21d2; Object </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'>
<p>loads the files within the directory CGMFS/partitioned_array_slice needed things range_arr =&gt; it is the array of ranges that the database is divided into data_arr =&gt; it is output to json rel_arr =&gt; it is output to json part_} =&gt; it is taken from the range_arr subdivisions; perform a map and load it into the database, one by one.</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#load_from_files!-instance_method" title="#load_from_files! (instance method)">#<strong>load_from_files!</strong>(db_folder: @db_folder)  &#x21d2; Object </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'></div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#load_partition_addition_amount_from_file!-instance_method" title="#load_partition_addition_amount_from_file! (instance method)">#<strong>load_partition_addition_amount_from_file!</strong>(db_folder: @db_folder)  &#x21d2; Object </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'></div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#load_partition_from_file!-instance_method" title="#load_partition_from_file! (instance method)">#<strong>load_partition_from_file!</strong>(partition_id)  &#x21d2; Object </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'>
<p>Plan: be able to dump @data_arr to disk anytime you want.</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#mkdir_bindir-instance_method" title="#mkdir_bindir (instance method)">#<strong>mkdir_bindir</strong>(path)  &#x21d2; Object </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'></div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#save_all_to_files!-instance_method" title="#save_all_to_files! (instance method)">#<strong>save_all_to_files!</strong>(db_folder: @db_folder, db_path: @db_path, db_name: @db_name)  &#x21d2; Object </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'></div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#save_dynamically_allocates_to_file!-instance_method" title="#save_dynamically_allocates_to_file! (instance method)">#<strong>save_dynamically_allocates_to_file!</strong>  &#x21d2; Object </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'></div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#save_partition_addition_amount_to_file!-instance_method" title="#save_partition_addition_amount_to_file! (instance method)">#<strong>save_partition_addition_amount_to_file!</strong>(db_folder: @db_folder)  &#x21d2; Object </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'></div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#save_partition_to_file!-instance_method" title="#save_partition_to_file! (instance method)">#<strong>save_partition_to_file!</strong>(partition_id, db_folder: @db_folder)  &#x21d2; Object </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'></div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#string2range-instance_method" title="#string2range (instance method)">#<strong>string2range</strong>(range_string)  &#x21d2; Object </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'></div></span>
  
</li>

      
    </ul>
  


  
  
  
  
  
  
  
  
  <h3 class="inherited">Methods inherited from <span class='object_link'><a href="PartitionedArray.html" title="PartitionedArray (class)">PartitionedArray</a></span></h3>
  <p class="inherited"><span class='object_link'><a href="PartitionedArray.html#[]-instance_method" title="PartitionedArray#[] (method)">#[]</a></span>, <span class='object_link'><a href="PartitionedArray.html#add-instance_method" title="PartitionedArray#add (method)">#add</a></span>, <span class='object_link'><a href="PartitionedArray.html#add_partition-instance_method" title="PartitionedArray#add_partition (method)">#add_partition</a></span>, <span class='object_link'><a href="PartitionedArray.html#all_empty_partitions%3F-instance_method" title="PartitionedArray#all_empty_partitions? (method)">#all_empty_partitions?</a></span>, <span class='object_link'><a href="PartitionedArray.html#allocate-instance_method" title="PartitionedArray#allocate (method)">#allocate</a></span>, <span class='object_link'><a href="PartitionedArray.html#debug-instance_method" title="PartitionedArray#debug (method)">#debug</a></span>, <span class='object_link'><a href="PartitionedArray.html#debug_and_pause-instance_method" title="PartitionedArray#debug_and_pause (method)">#debug_and_pause</a></span>, <span class='object_link'><a href="PartitionedArray.html#delete-instance_method" title="PartitionedArray#delete (method)">#delete</a></span>, <span class='object_link'><a href="PartitionedArray.html#delete_partition-instance_method" title="PartitionedArray#delete_partition (method)">#delete_partition</a></span>, <span class='object_link'><a href="PartitionedArray.html#delete_partition_subelement-instance_method" title="PartitionedArray#delete_partition_subelement (method)">#delete_partition_subelement</a></span>, <span class='object_link'><a href="PartitionedArray.html#dup_data_arr!-instance_method" title="PartitionedArray#dup_data_arr! (method)">#dup_data_arr!</a></span>, <span class='object_link'><a href="PartitionedArray.html#get-instance_method" title="PartitionedArray#get (method)">#get</a></span>, <span class='object_link'><a href="PartitionedArray.html#get_partition-instance_method" title="PartitionedArray#get_partition (method)">#get_partition</a></span>, <span class='object_link'><a href="PartitionedArray.html#initialize-instance_method" title="PartitionedArray#initialize (method)">#initialize</a></span>, <span class='object_link'><a href="PartitionedArray.html#range_db_get-instance_method" title="PartitionedArray#range_db_get (method)">#range_db_get</a></span>, <span class='object_link'><a href="PartitionedArray.html#set-instance_method" title="PartitionedArray#set (method)">#set</a></span>, <span class='object_link'><a href="PartitionedArray.html#set_partition_subelement-instance_method" title="PartitionedArray#set_partition_subelement (method)">#set_partition_subelement</a></span></p>
<div id="constructor_details" class="method_details_list">
  <h2>Constructor Details</h2>
  
    <p class="notice">This class inherits a constructor from <span class='object_link'><a href="PartitionedArray.html#initialize-instance_method" title="PartitionedArray#initialize (method)">PartitionedArray</a></span></p>
  
</div>


  <div id="instance_method_details" class="method_details_list">
    <h2>Instance Method Details</h2>

    
      <div class="method_details first">
  <h3 class="signature first" id="load_dynamically_allocates_from_file!-instance_method">
  
    #<strong>load_dynamically_allocates_from_file!</strong>  &#x21d2; <tt>Object</tt> 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    
<p>loads the files within the directory CGMFS/partitioned_array_slice needed things range_arr =&gt; it is the array of ranges that the database is divided into data_arr =&gt; it is output to json rel_arr =&gt; it is output to json part_} =&gt; it is taken from the range_arr subdivisions; perform a map and load it into the database, one by one</p>


  </div>
</div>
<div class="tags">
  

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


14
15
16
17
18</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/dragonruby_pure_partitioned_array/partitioned_array_dr.rb', line 14</span>

<span class='kw'>def</span> <span class='id identifier rubyid_load_dynamically_allocates_from_file!'>load_dynamically_allocates_from_file!</span>
  <span class='const'>File</span><span class='period'>.</span><span class='id identifier rubyid_open'>open</span><span class='lparen'>(</span><span class='ivar'>@db_path</span> <span class='op'>+</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>/</span><span class='tstring_end'>&#39;</span></span> <span class='op'>+</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>dynamically_allocates.json</span><span class='tstring_end'>&#39;</span></span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>r</span><span class='tstring_end'>&#39;</span></span><span class='rparen'>)</span> <span class='kw'>do</span> <span class='op'>|</span><span class='id identifier rubyid_file'>file</span><span class='op'>|</span>
    <span class='ivar'>@dynamically_allocates</span> <span class='op'>=</span> <span class='const'><span class='object_link'><a href="JSONeval.html" title="JSONeval (class)">JSONeval</a></span></span><span class='period'>.</span><span class='id identifier rubyid_json2ruby'><span class='object_link'><a href="JSONeval.html#json2ruby-class_method" title="JSONeval.json2ruby (method)">json2ruby</a></span></span><span class='lparen'>(</span><span class='id identifier rubyid_file'>file</span><span class='period'>.</span><span class='id identifier rubyid_read'>read</span><span class='rparen'>)</span>
  <span class='kw'>end</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="load_from_files!-instance_method">
  
    #<strong>load_from_files!</strong>(db_folder: @db_folder)  &#x21d2; <tt>Object</tt> 
  

  

  
</h3><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


36
37
38
39
40
41
42
43
44
45
46
47
48
49
50
51
52</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/dragonruby_pure_partitioned_array/partitioned_array_dr.rb', line 36</span>

<span class='kw'>def</span> <span class='id identifier rubyid_load_from_files!'>load_from_files!</span><span class='lparen'>(</span><span class='label'>db_folder:</span> <span class='ivar'>@db_folder</span><span class='rparen'>)</span>
  <span class='id identifier rubyid_load_partition_addition_amount_from_file!'>load_partition_addition_amount_from_file!</span>
  <span class='id identifier rubyid_load_dynamically_allocates_from_file!'>load_dynamically_allocates_from_file!</span>
  <span class='comment'># @db_size needs to be taken into account and changed accordingly
</span>  <span class='id identifier rubyid_path'>path</span> <span class='op'>=</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='embexpr_beg'>#{</span><span class='ivar'>@db_path</span><span class='embexpr_end'>}</span><span class='tstring_content'>/</span><span class='embexpr_beg'>#{</span><span class='ivar'>@db_name</span><span class='embexpr_end'>}</span><span class='tstring_end'>&quot;</span></span>    
  <span class='ivar'>@partition_amount_and_offset</span> <span class='op'>=</span> <span class='const'>File</span><span class='period'>.</span><span class='id identifier rubyid_open'>open</span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>&quot;</span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_path'>path</span><span class='embexpr_end'>}</span><span class='tstring_content'>/partition_amount_and_offset.json</span><span class='tstring_end'>&quot;</span></span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>r</span><span class='tstring_end'>&#39;</span></span><span class='rparen'>)</span> <span class='lbrace'>{</span> <span class='op'>|</span><span class='id identifier rubyid_f'>f</span><span class='op'>|</span> <span class='const'><span class='object_link'><a href="JSONeval.html" title="JSONeval (class)">JSONeval</a></span></span><span class='period'>.</span><span class='id identifier rubyid_json2ruby'><span class='object_link'><a href="JSONeval.html#json2ruby-class_method" title="JSONeval.json2ruby (method)">json2ruby</a></span></span><span class='lparen'>(</span><span class='id identifier rubyid_f'>f</span><span class='period'>.</span><span class='id identifier rubyid_read'>read</span><span class='rparen'>)</span> <span class='rbrace'>}</span>
  <span class='ivar'>@range_arr</span> <span class='op'>=</span> <span class='const'>File</span><span class='period'>.</span><span class='id identifier rubyid_open'>open</span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>&quot;</span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_path'>path</span><span class='embexpr_end'>}</span><span class='tstring_content'>/range_arr.json</span><span class='tstring_end'>&quot;</span></span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>r</span><span class='tstring_end'>&#39;</span></span><span class='rparen'>)</span> <span class='lbrace'>{</span> <span class='op'>|</span><span class='id identifier rubyid_f'>f</span><span class='op'>|</span> <span class='const'><span class='object_link'><a href="JSONeval.html" title="JSONeval (class)">JSONeval</a></span></span><span class='period'>.</span><span class='id identifier rubyid_range_arr2ruby'><span class='object_link'><a href="JSONeval.html#range_arr2ruby-class_method" title="JSONeval.range_arr2ruby (method)">range_arr2ruby</a></span></span><span class='lparen'>(</span><span class='id identifier rubyid_f'>f</span><span class='period'>.</span><span class='id identifier rubyid_read'>read</span><span class='rparen'>)</span> <span class='rbrace'>}</span>
  <span class='ivar'>@range_arr</span><span class='period'>.</span><span class='id identifier rubyid_map!'>map!</span><span class='lbrace'>{</span> <span class='op'>|</span><span class='id identifier rubyid_range_element'>range_element</span><span class='op'>|</span> <span class='id identifier rubyid_string2range'>string2range</span><span class='lparen'>(</span><span class='id identifier rubyid_range_element'>range_element</span><span class='rparen'>)</span> <span class='rbrace'>}</span>
  <span class='ivar'>@rel_arr</span> <span class='op'>=</span> <span class='const'>File</span><span class='period'>.</span><span class='id identifier rubyid_open'>open</span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>&quot;</span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_path'>path</span><span class='embexpr_end'>}</span><span class='tstring_content'>/rel_arr.json</span><span class='tstring_end'>&quot;</span></span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>r</span><span class='tstring_end'>&#39;</span></span><span class='rparen'>)</span> <span class='lbrace'>{</span> <span class='op'>|</span><span class='id identifier rubyid_f'>f</span><span class='op'>|</span> <span class='const'><span class='object_link'><a href="JSONeval.html" title="JSONeval (class)">JSONeval</a></span></span><span class='period'>.</span><span class='id identifier rubyid_json2ruby'><span class='object_link'><a href="JSONeval.html#json2ruby-class_method" title="JSONeval.json2ruby (method)">json2ruby</a></span></span><span class='lparen'>(</span><span class='id identifier rubyid_f'>f</span><span class='period'>.</span><span class='id identifier rubyid_read'>read</span><span class='rparen'>)</span> <span class='rbrace'>}</span>
  <span class='ivar'>@db_size</span> <span class='op'>=</span> <span class='const'>File</span><span class='period'>.</span><span class='id identifier rubyid_open'>open</span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>&quot;</span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_path'>path</span><span class='embexpr_end'>}</span><span class='tstring_content'>/db_size.json</span><span class='tstring_end'>&quot;</span></span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>r</span><span class='tstring_end'>&#39;</span></span><span class='rparen'>)</span> <span class='lbrace'>{</span> <span class='op'>|</span><span class='id identifier rubyid_f'>f</span><span class='op'>|</span> <span class='const'><span class='object_link'><a href="JSONeval.html" title="JSONeval (class)">JSONeval</a></span></span><span class='period'>.</span><span class='id identifier rubyid_json2ruby'><span class='object_link'><a href="JSONeval.html#json2ruby-class_method" title="JSONeval.json2ruby (method)">json2ruby</a></span></span><span class='lparen'>(</span><span class='id identifier rubyid_f'>f</span><span class='period'>.</span><span class='id identifier rubyid_read'>read</span><span class='rparen'>)</span> <span class='rbrace'>}</span>
  <span class='id identifier rubyid_data_arr_set_partitions'>data_arr_set_partitions</span> <span class='op'>=</span> <span class='lbracket'>[</span><span class='rbracket'>]</span>
  <span class='int'>0</span><span class='period'>.</span><span class='id identifier rubyid_upto'>upto</span><span class='lparen'>(</span><span class='ivar'>@db_size</span> <span class='op'>-</span> <span class='int'>1</span><span class='rparen'>)</span> <span class='kw'>do</span> <span class='op'>|</span><span class='id identifier rubyid_partition_element_index'>partition_element_index</span><span class='op'>|</span>
    <span class='id identifier rubyid_data_arr_set_partitions'>data_arr_set_partitions</span> <span class='op'>&lt;&lt;</span> <span class='const'>File</span><span class='period'>.</span><span class='id identifier rubyid_open'>open</span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>&quot;</span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_path'>path</span><span class='embexpr_end'>}</span><span class='tstring_content'>/</span><span class='embexpr_beg'>#{</span><span class='ivar'>@db_name</span><span class='embexpr_end'>}</span><span class='tstring_content'>_part_</span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_partition_element_index'>partition_element_index</span><span class='embexpr_end'>}</span><span class='tstring_content'>.json</span><span class='tstring_end'>&quot;</span></span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>r</span><span class='tstring_end'>&#39;</span></span><span class='rparen'>)</span> <span class='lbrace'>{</span> <span class='op'>|</span><span class='id identifier rubyid_f'>f</span><span class='op'>|</span> <span class='const'><span class='object_link'><a href="JSONeval.html" title="JSONeval (class)">JSONeval</a></span></span><span class='period'>.</span><span class='id identifier rubyid_json2ruby'><span class='object_link'><a href="JSONeval.html#json2ruby-class_method" title="JSONeval.json2ruby (method)">json2ruby</a></span></span><span class='lparen'>(</span><span class='id identifier rubyid_f'>f</span><span class='period'>.</span><span class='id identifier rubyid_read'>read</span><span class='rparen'>)</span> <span class='rbrace'>}</span>
    <span class='ivar'>@data_arr</span> <span class='op'>=</span> <span class='id identifier rubyid_data_arr_set_partitions'>data_arr_set_partitions</span><span class='period'>.</span><span class='id identifier rubyid_flatten'>flatten</span> <span class='comment'># side effect: if you don&#39;t flatten it, you get an array with partitioned array elements
</span>  <span class='kw'>end</span>
  <span class='ivar'>@allocated</span> <span class='op'>=</span> <span class='kw'>true</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="load_partition_addition_amount_from_file!-instance_method">
  
    #<strong>load_partition_addition_amount_from_file!</strong>(db_folder: @db_folder)  &#x21d2; <tt>Object</tt> 
  

  

  
</h3><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


83
84
85
86</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/dragonruby_pure_partitioned_array/partitioned_array_dr.rb', line 83</span>

<span class='kw'>def</span> <span class='id identifier rubyid_load_partition_addition_amount_from_file!'>load_partition_addition_amount_from_file!</span><span class='lparen'>(</span><span class='label'>db_folder:</span> <span class='ivar'>@db_folder</span><span class='rparen'>)</span>
  <span class='id identifier rubyid_path'>path</span> <span class='op'>=</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='embexpr_beg'>#{</span><span class='ivar'>@db_path</span><span class='embexpr_end'>}</span><span class='tstring_content'>/</span><span class='embexpr_beg'>#{</span><span class='ivar'>@db_name</span><span class='embexpr_end'>}</span><span class='tstring_end'>&quot;</span></span>
  <span class='ivar'>@partition_addition_amount</span> <span class='op'>=</span> <span class='const'>File</span><span class='period'>.</span><span class='id identifier rubyid_open'>open</span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>&quot;</span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_path'>path</span><span class='embexpr_end'>}</span><span class='tstring_content'>/</span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_db_folder'>db_folder</span><span class='embexpr_end'>}</span><span class='tstring_content'>/partition_addition_amount.json</span><span class='tstring_end'>&quot;</span></span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>r</span><span class='tstring_end'>&#39;</span></span><span class='rparen'>)</span> <span class='lbrace'>{</span> <span class='op'>|</span><span class='id identifier rubyid_f'>f</span><span class='op'>|</span> <span class='const'><span class='object_link'><a href="JSONeval.html" title="JSONeval (class)">JSONeval</a></span></span><span class='period'>.</span><span class='id identifier rubyid_json2ruby'><span class='object_link'><a href="JSONeval.html#json2ruby-class_method" title="JSONeval.json2ruby (method)">json2ruby</a></span></span><span class='lparen'>(</span><span class='id identifier rubyid_f'>f</span><span class='period'>.</span><span class='id identifier rubyid_read'>read</span><span class='rparen'>)</span> <span class='rbrace'>}</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="load_partition_from_file!-instance_method">
  
    #<strong>load_partition_from_file!</strong>(partition_id)  &#x21d2; <tt>Object</tt> 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    
<p>Plan: be able to dump @data_arr to disk anytime you want</p>


  </div>
</div>
<div class="tags">
  

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


55
56
57
58
59
60
61
62
63
64
65
66
67
68</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/dragonruby_pure_partitioned_array/partitioned_array_dr.rb', line 55</span>

<span class='kw'>def</span> <span class='id identifier rubyid_load_partition_from_file!'>load_partition_from_file!</span><span class='lparen'>(</span><span class='id identifier rubyid_partition_id'>partition_id</span><span class='rparen'>)</span>
  <span class='id identifier rubyid_path'>path</span> <span class='op'>=</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='embexpr_beg'>#{</span><span class='ivar'>@db_path</span><span class='embexpr_end'>}</span><span class='tstring_content'>/</span><span class='embexpr_beg'>#{</span><span class='ivar'>@db_name</span><span class='embexpr_end'>}</span><span class='tstring_end'>&quot;</span></span>
  <span class='comment'># @data_arr = File.open(&quot;#{path}/data_arr.json&quot;, &#39;r&#39;) { |f| JSONeval.json2ruby(f.read) } # can write the entire array to disk for certain operations
</span>  <span class='ivar'>@partition_amount_and_offset</span> <span class='op'>=</span> <span class='const'>File</span><span class='period'>.</span><span class='id identifier rubyid_open'>open</span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>&quot;</span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_path'>path</span><span class='embexpr_end'>}</span><span class='tstring_content'>/partition_amount_and_offset.json</span><span class='tstring_end'>&quot;</span></span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>r</span><span class='tstring_end'>&#39;</span></span><span class='rparen'>)</span> <span class='lbrace'>{</span> <span class='op'>|</span><span class='id identifier rubyid_f'>f</span><span class='op'>|</span> <span class='const'><span class='object_link'><a href="JSONeval.html" title="JSONeval (class)">JSONeval</a></span></span><span class='period'>.</span><span class='id identifier rubyid_json2ruby'><span class='object_link'><a href="JSONeval.html#json2ruby-class_method" title="JSONeval.json2ruby (method)">json2ruby</a></span></span><span class='lparen'>(</span><span class='id identifier rubyid_f'>f</span><span class='period'>.</span><span class='id identifier rubyid_read'>read</span><span class='rparen'>)</span> <span class='rbrace'>}</span>
  <span class='ivar'>@range_arr</span> <span class='op'>=</span> <span class='const'>File</span><span class='period'>.</span><span class='id identifier rubyid_open'>open</span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>&quot;</span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_path'>path</span><span class='embexpr_end'>}</span><span class='tstring_content'>/range_arr.json</span><span class='tstring_end'>&quot;</span></span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>r</span><span class='tstring_end'>&#39;</span></span><span class='rparen'>)</span> <span class='lbrace'>{</span> <span class='op'>|</span><span class='id identifier rubyid_f'>f</span><span class='op'>|</span> <span class='const'><span class='object_link'><a href="JSONeval.html" title="JSONeval (class)">JSONeval</a></span></span><span class='period'>.</span><span class='id identifier rubyid_range_arr2ruby'><span class='object_link'><a href="JSONeval.html#range_arr2ruby-class_method" title="JSONeval.range_arr2ruby (method)">range_arr2ruby</a></span></span><span class='lparen'>(</span><span class='id identifier rubyid_f'>f</span><span class='period'>.</span><span class='id identifier rubyid_read'>read</span><span class='rparen'>)</span> <span class='rbrace'>}</span>
  <span class='ivar'>@range_arr</span><span class='period'>.</span><span class='id identifier rubyid_map!'>map!</span><span class='lbrace'>{</span><span class='op'>|</span><span class='id identifier rubyid_range_element'>range_element</span><span class='op'>|</span> <span class='id identifier rubyid_string2range'>string2range</span><span class='lparen'>(</span><span class='id identifier rubyid_range_element'>range_element</span><span class='rparen'>)</span> <span class='rbrace'>}</span>
  <span class='ivar'>@rel_arr</span> <span class='op'>=</span> <span class='const'>File</span><span class='period'>.</span><span class='id identifier rubyid_open'>open</span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>&quot;</span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_path'>path</span><span class='embexpr_end'>}</span><span class='tstring_content'>/rel_arr.json</span><span class='tstring_end'>&quot;</span></span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>r</span><span class='tstring_end'>&#39;</span></span><span class='rparen'>)</span> <span class='lbrace'>{</span> <span class='op'>|</span><span class='id identifier rubyid_f'>f</span><span class='op'>|</span> <span class='const'><span class='object_link'><a href="JSONeval.html" title="JSONeval (class)">JSONeval</a></span></span><span class='period'>.</span><span class='id identifier rubyid_json2ruby'><span class='object_link'><a href="JSONeval.html#json2ruby-class_method" title="JSONeval.json2ruby (method)">json2ruby</a></span></span><span class='lparen'>(</span><span class='id identifier rubyid_f'>f</span><span class='period'>.</span><span class='id identifier rubyid_read'>read</span><span class='rparen'>)</span> <span class='rbrace'>}</span>
  <span class='id identifier rubyid_sliced_range_arr'>sliced_range_arr</span> <span class='op'>=</span> <span class='ivar'>@range_arr</span><span class='lbracket'>[</span><span class='id identifier rubyid_partition_id'>partition_id</span><span class='rbracket'>]</span><span class='period'>.</span><span class='id identifier rubyid_to_a'>to_a</span><span class='period'>.</span><span class='id identifier rubyid_map'>map</span> <span class='lbrace'>{</span> <span class='op'>|</span><span class='id identifier rubyid_range_element'>range_element</span><span class='op'>|</span> <span class='id identifier rubyid_range_element'>range_element</span> <span class='rbrace'>}</span>
  <span class='id identifier rubyid_partition_data'>partition_data</span> <span class='op'>=</span> <span class='const'>File</span><span class='period'>.</span><span class='id identifier rubyid_open'>open</span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>&quot;</span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_path'>path</span><span class='embexpr_end'>}</span><span class='tstring_content'>/</span><span class='embexpr_beg'>#{</span><span class='ivar'>@db_name</span><span class='embexpr_end'>}</span><span class='tstring_content'>_part_</span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_partition_id'>partition_id</span><span class='embexpr_end'>}</span><span class='tstring_content'>.json</span><span class='tstring_end'>&quot;</span></span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>r</span><span class='tstring_end'>&#39;</span></span><span class='rparen'>)</span> <span class='lbrace'>{</span> <span class='op'>|</span><span class='id identifier rubyid_f'>f</span><span class='op'>|</span> <span class='const'><span class='object_link'><a href="JSONeval.html" title="JSONeval (class)">JSONeval</a></span></span><span class='period'>.</span><span class='id identifier rubyid_json2ruby'><span class='object_link'><a href="JSONeval.html#json2ruby-class_method" title="JSONeval.json2ruby (method)">json2ruby</a></span></span><span class='lparen'>(</span><span class='id identifier rubyid_f'>f</span><span class='period'>.</span><span class='id identifier rubyid_read'>read</span><span class='rparen'>)</span> <span class='rbrace'>}</span>
  <span class='lparen'>(</span><span class='lparen'>(</span><span class='id identifier rubyid_sliced_range_arr'>sliced_range_arr</span><span class='lbracket'>[</span><span class='int'>0</span><span class='rbracket'>]</span><span class='period'>.</span><span class='id identifier rubyid_to_i'>to_i</span><span class='rparen'>)</span><span class='op'>..</span><span class='lparen'>(</span><span class='id identifier rubyid_sliced_range_arr'>sliced_range_arr</span><span class='lbracket'>[</span><span class='op'>-</span><span class='int'>1</span><span class='rbracket'>]</span><span class='period'>.</span><span class='id identifier rubyid_to_i'>to_i</span><span class='rparen'>)</span><span class='rparen'>)</span><span class='period'>.</span><span class='id identifier rubyid_to_a'>to_a</span><span class='period'>.</span><span class='id identifier rubyid_each'>each</span> <span class='kw'>do</span> <span class='op'>|</span><span class='id identifier rubyid_range_element'>range_element</span><span class='op'>|</span>
    <span class='ivar'>@data_arr</span><span class='lbracket'>[</span><span class='id identifier rubyid_range_element'>range_element</span><span class='rbracket'>]</span> <span class='op'>=</span> <span class='id identifier rubyid_partition_data'>partition_data</span><span class='lbracket'>[</span><span class='id identifier rubyid_range_element'>range_element</span><span class='rbracket'>]</span>
  <span class='kw'>end</span>
  <span class='ivar'>@data_arr</span><span class='lbracket'>[</span><span class='ivar'>@range_arr</span><span class='lbracket'>[</span><span class='id identifier rubyid_partition_id'>partition_id</span><span class='rbracket'>]</span><span class='rbracket'>]</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="mkdir_bindir-instance_method">
  
    #<strong>mkdir_bindir</strong>(path)  &#x21d2; <tt>Object</tt> 
  

  

  
</h3><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


89
90
91</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/dragonruby_pure_partitioned_array/partitioned_array_dr.rb', line 89</span>

<span class='kw'>def</span> <span class='id identifier rubyid_mkdir_bindir'><span class='object_link'><a href="top-level-namespace.html#mkdir_bindir-instance_method" title="#mkdir_bindir (method)">mkdir_bindir</a></span></span><span class='lparen'>(</span><span class='id identifier rubyid_path'>path</span><span class='rparen'>)</span>
  <span class='gvar'>$gtk</span><span class='period'>.</span><span class='id identifier rubyid_system'>system</span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>cmd /c mkdir \&quot;</span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_pwd'><span class='object_link'><a href="top-level-namespace.html#pwd-instance_method" title="#pwd (method)">pwd</a></span></span><span class='embexpr_end'>}</span><span class='tstring_content'>\\</span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_path'>path</span><span class='embexpr_end'>}</span><span class='tstring_content'>\&quot;</span><span class='tstring_end'>&quot;</span></span><span class='rparen'>)</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="save_all_to_files!-instance_method">
  
    #<strong>save_all_to_files!</strong>(db_folder: @db_folder, db_path: @db_path, db_name: @db_name)  &#x21d2; <tt>Object</tt> 
  

  

  
</h3><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


93
94
95
96
97
98
99
100
101
102
103
104
105
106
107
108
109
110
111
112
113
114
115
116
117
118
119
120
121
122
123
124
125
126
127
128
129
130</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/dragonruby_pure_partitioned_array/partitioned_array_dr.rb', line 93</span>

<span class='kw'>def</span> <span class='id identifier rubyid_save_all_to_files!'>save_all_to_files!</span><span class='lparen'>(</span><span class='label'>db_folder:</span> <span class='ivar'>@db_folder</span><span class='comma'>,</span> <span class='label'>db_path:</span> <span class='ivar'>@db_path</span><span class='comma'>,</span> <span class='label'>db_name:</span> <span class='ivar'>@db_name</span><span class='rparen'>)</span>
  <span class='comment'># Bug: files are not being written correctly.
</span>  <span class='comment'># Fix: (8/11/2022 - 5:55am) - add db_size.json
</span>  
  <span class='kw'>unless</span> <span class='const'>File</span><span class='period'>.</span><span class='id identifier rubyid_exist?'>exist?</span><span class='lparen'>(</span><span class='id identifier rubyid_db_path'>db_path</span><span class='rparen'>)</span>
    <span class='id identifier rubyid_mkdir_bindir'><span class='object_link'><a href="top-level-namespace.html#mkdir_bindir-instance_method" title="#mkdir_bindir (method)">mkdir_bindir</a></span></span><span class='lparen'>(</span><span class='id identifier rubyid_db_path'>db_path</span><span class='rparen'>)</span>
  <span class='kw'>end</span>
  <span class='id identifier rubyid_path'>path</span> <span class='op'>=</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_db_path'>db_path</span><span class='embexpr_end'>}</span><span class='tstring_content'>/</span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_db_name'>db_name</span><span class='embexpr_end'>}</span><span class='tstring_end'>&quot;</span></span>

  <span class='kw'>unless</span> <span class='const'>File</span><span class='period'>.</span><span class='id identifier rubyid_exist?'>exist?</span><span class='lparen'>(</span><span class='id identifier rubyid_path'>path</span><span class='rparen'>)</span>
    <span class='id identifier rubyid_mkdir_bindir'><span class='object_link'><a href="top-level-namespace.html#mkdir_bindir-instance_method" title="#mkdir_bindir (method)">mkdir_bindir</a></span></span><span class='lparen'>(</span><span class='id identifier rubyid_path'>path</span><span class='rparen'>)</span>
  <span class='kw'>end</span>

  <span class='id identifier rubyid_save_partition_addition_amount_to_file!'>save_partition_addition_amount_to_file!</span>
  <span class='id identifier rubyid_save_dynamically_allocates_to_file!'>save_dynamically_allocates_to_file!</span>

  <span class='const'>File</span><span class='period'>.</span><span class='id identifier rubyid_open'>open</span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>&quot;</span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_path'>path</span><span class='embexpr_end'>}</span><span class='tstring_content'>/</span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_db_folder'>db_folder</span><span class='embexpr_end'>}</span><span class='tstring_content'>/partition_amount_and_offset.json</span><span class='tstring_end'>&quot;</span></span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>w</span><span class='tstring_end'>&#39;</span></span><span class='rparen'>)</span><span class='lbrace'>{</span><span class='op'>|</span><span class='id identifier rubyid_f'>f</span><span class='op'>|</span> <span class='id identifier rubyid_f'>f</span><span class='period'>.</span><span class='id identifier rubyid_write'>write</span><span class='lparen'>(</span><span class='const'><span class='object_link'><a href="JSONeval.html" title="JSONeval (class)">JSONeval</a></span></span><span class='period'>.</span><span class='id identifier rubyid_ruby2json'><span class='object_link'><a href="JSONeval.html#ruby2json-class_method" title="JSONeval.ruby2json (method)">ruby2json</a></span></span><span class='lparen'>(</span><span class='ivar'>@partition_amount_and_offset</span><span class='rparen'>)</span><span class='rparen'>)</span> <span class='rbrace'>}</span>
  <span class='const'>File</span><span class='period'>.</span><span class='id identifier rubyid_open'>open</span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>&quot;</span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_path'>path</span><span class='embexpr_end'>}</span><span class='tstring_content'>/</span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_db_folder'>db_folder</span><span class='embexpr_end'>}</span><span class='tstring_content'>/range_arr.json</span><span class='tstring_end'>&quot;</span></span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>w</span><span class='tstring_end'>&#39;</span></span><span class='rparen'>)</span><span class='lbrace'>{</span><span class='op'>|</span><span class='id identifier rubyid_f'>f</span><span class='op'>|</span> <span class='id identifier rubyid_f'>f</span><span class='period'>.</span><span class='id identifier rubyid_write'>write</span><span class='lparen'>(</span><span class='const'><span class='object_link'><a href="JSONeval.html" title="JSONeval (class)">JSONeval</a></span></span><span class='period'>.</span><span class='id identifier rubyid_ruby2json'><span class='object_link'><a href="JSONeval.html#ruby2json-class_method" title="JSONeval.ruby2json (method)">ruby2json</a></span></span><span class='lparen'>(</span><span class='ivar'>@range_arr</span><span class='rparen'>)</span><span class='rparen'>)</span> <span class='rbrace'>}</span>
  <span class='const'>File</span><span class='period'>.</span><span class='id identifier rubyid_open'>open</span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>&quot;</span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_path'>path</span><span class='embexpr_end'>}</span><span class='tstring_content'>/</span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_db_folder'>db_folder</span><span class='embexpr_end'>}</span><span class='tstring_content'>/rel_arr.json</span><span class='tstring_end'>&quot;</span></span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>w</span><span class='tstring_end'>&#39;</span></span><span class='rparen'>)</span><span class='lbrace'>{</span><span class='op'>|</span><span class='id identifier rubyid_f'>f</span><span class='op'>|</span> <span class='id identifier rubyid_f'>f</span><span class='period'>.</span><span class='id identifier rubyid_write'>write</span><span class='lparen'>(</span><span class='const'><span class='object_link'><a href="JSONeval.html" title="JSONeval (class)">JSONeval</a></span></span><span class='period'>.</span><span class='id identifier rubyid_ruby2json'><span class='object_link'><a href="JSONeval.html#ruby2json-class_method" title="JSONeval.ruby2json (method)">ruby2json</a></span></span><span class='lparen'>(</span><span class='ivar'>@rel_arr</span><span class='rparen'>)</span><span class='rparen'>)</span> <span class='rbrace'>}</span>
  <span class='const'>File</span><span class='period'>.</span><span class='id identifier rubyid_open'>open</span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>&quot;</span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_path'>path</span><span class='embexpr_end'>}</span><span class='tstring_content'>/</span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_db_folder'>db_folder</span><span class='embexpr_end'>}</span><span class='tstring_content'>/db_size.json</span><span class='tstring_end'>&quot;</span></span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>w</span><span class='tstring_end'>&#39;</span></span><span class='rparen'>)</span><span class='lbrace'>{</span><span class='op'>|</span><span class='id identifier rubyid_f'>f</span><span class='op'>|</span> <span class='id identifier rubyid_f'>f</span><span class='period'>.</span><span class='id identifier rubyid_write'>write</span><span class='lparen'>(</span><span class='const'><span class='object_link'><a href="JSONeval.html" title="JSONeval (class)">JSONeval</a></span></span><span class='period'>.</span><span class='id identifier rubyid_ruby2json'><span class='object_link'><a href="JSONeval.html#ruby2json-class_method" title="JSONeval.ruby2json (method)">ruby2json</a></span></span><span class='lparen'>(</span><span class='ivar'>@db_size</span><span class='rparen'>)</span><span class='rparen'>)</span> <span class='rbrace'>}</span>
  <span class='id identifier rubyid_debug'>debug</span> <span class='id identifier rubyid_path'>path</span>
  <span class='int'>0</span><span class='period'>.</span><span class='id identifier rubyid_upto'>upto</span><span class='lparen'>(</span><span class='ivar'>@db_size</span><span class='op'>-</span><span class='int'>1</span><span class='rparen'>)</span> <span class='kw'>do</span> <span class='op'>|</span><span class='id identifier rubyid_index'>index</span><span class='op'>|</span>
    <span class='comment'># FileUtils.touch(&quot;#{path}/#{db_folder}/#{@db_name}_part_#{index}.json&quot;)
</span>    <span class='backtick'>`</span><span class='tstring_content'>cmd /c copy nul &gt;&gt; &quot;</span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_path'>path</span><span class='embexpr_end'>}</span><span class='tstring_content'>/</span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_db_folder'>db_folder</span><span class='embexpr_end'>}</span><span class='tstring_content'>/</span><span class='embexpr_beg'>#{</span><span class='ivar'>@db_name</span><span class='embexpr_end'>}</span><span class='tstring_content'>_part_</span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_index'>index</span><span class='embexpr_end'>}</span><span class='tstring_content'>.json&quot;</span><span class='tstring_end'>`</span></span> <span class='comment'># for windows
</span>    <span class='const'>File</span><span class='period'>.</span><span class='id identifier rubyid_open'>open</span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>&quot;</span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_path'>path</span><span class='embexpr_end'>}</span><span class='tstring_content'>/</span><span class='embexpr_beg'>#{</span><span class='ivar'>@db_name</span><span class='embexpr_end'>}</span><span class='tstring_content'>_part_</span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_index'>index</span><span class='embexpr_end'>}</span><span class='tstring_content'>.json</span><span class='tstring_end'>&quot;</span></span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>w</span><span class='tstring_end'>&#39;</span></span><span class='rparen'>)</span> <span class='kw'>do</span> <span class='op'>|</span><span class='id identifier rubyid_f'>f</span><span class='op'>|</span>
      <span class='id identifier rubyid_partition'>partition</span> <span class='op'>=</span> <span class='id identifier rubyid_get_partition'>get_partition</span><span class='lparen'>(</span><span class='id identifier rubyid_index'>index</span><span class='rparen'>)</span>
      <span class='id identifier rubyid_debug_and_pause'>debug_and_pause</span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>partition index: </span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_index'>index</span><span class='embexpr_end'>}</span><span class='tstring_end'>&quot;</span></span><span class='rparen'>)</span>
      <span class='id identifier rubyid_debug'>debug</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>partition index: </span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_index'>index</span><span class='embexpr_end'>}</span><span class='tstring_end'>&quot;</span></span>
      <span class='id identifier rubyid_debug'>debug</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>@db_size: </span><span class='embexpr_beg'>#{</span><span class='ivar'>@db_size</span><span class='embexpr_end'>}</span><span class='tstring_end'>&quot;</span></span>
      <span class='id identifier rubyid_debug'>debug</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>partition: </span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_partition'>partition</span><span class='embexpr_end'>}</span><span class='tstring_end'>&quot;</span></span>
      <span class='id identifier rubyid_debug'>debug</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>@rel_arr: </span><span class='embexpr_beg'>#{</span><span class='ivar'>@rel_arr</span><span class='embexpr_end'>}</span><span class='tstring_end'>&quot;</span></span>
      <span class='id identifier rubyid_debug'>debug</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>@range_arr: </span><span class='embexpr_beg'>#{</span><span class='ivar'>@range_arr</span><span class='embexpr_end'>}</span><span class='tstring_end'>&quot;</span></span>
      <span class='id identifier rubyid_debug'>debug</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>@data_arr: </span><span class='embexpr_beg'>#{</span><span class='ivar'>@data_arr</span><span class='period'>.</span><span class='id identifier rubyid_size'>size</span><span class='embexpr_end'>}</span><span class='tstring_end'>&quot;</span></span>
      <span class='id identifier rubyid_debug'>debug</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>@data_arr: </span><span class='embexpr_beg'>#{</span><span class='ivar'>@data_arr</span><span class='embexpr_end'>}</span><span class='tstring_end'>&quot;</span></span>
      <span class='id identifier rubyid_f'>f</span><span class='period'>.</span><span class='id identifier rubyid_write'>write</span><span class='lparen'>(</span><span class='const'><span class='object_link'><a href="JSONeval.html" title="JSONeval (class)">JSONeval</a></span></span><span class='period'>.</span><span class='id identifier rubyid_ruby2json'><span class='object_link'><a href="JSONeval.html#ruby2json-class_method" title="JSONeval.ruby2json (method)">ruby2json</a></span></span><span class='lparen'>(</span><span class='id identifier rubyid_partition'>partition</span><span class='rparen'>)</span><span class='rparen'>)</span>
    <span class='kw'>end</span>
  <span class='kw'>end</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="save_dynamically_allocates_to_file!-instance_method">
  
    #<strong>save_dynamically_allocates_to_file!</strong>  &#x21d2; <tt>Object</tt> 
  

  

  
</h3><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


27
28
29
30
31
32
33
34</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/dragonruby_pure_partitioned_array/partitioned_array_dr.rb', line 27</span>

<span class='kw'>def</span> <span class='id identifier rubyid_save_dynamically_allocates_to_file!'>save_dynamically_allocates_to_file!</span>
  <span class='comment'>#puts &quot;in PA: @dynamically_allocates = #{@dynamically_allocates}&quot;
</span>   <span class='id identifier rubyid_mkdir_bindir'><span class='object_link'><a href="top-level-namespace.html#mkdir_bindir-instance_method" title="#mkdir_bindir (method)">mkdir_bindir</a></span></span><span class='lparen'>(</span><span class='ivar'>@db_path</span><span class='rparen'>)</span>
  <span class='comment'>#FileUtils.touch(@db_path + &#39;/&#39; + &#39;dynamically_allocates.json&#39;)
</span>  <span class='const'>File</span><span class='period'>.</span><span class='id identifier rubyid_open'>open</span><span class='lparen'>(</span><span class='ivar'>@db_path</span> <span class='op'>+</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>/</span><span class='tstring_end'>&#39;</span></span> <span class='op'>+</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>dynamically_allocates.json</span><span class='tstring_end'>&#39;</span></span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>w</span><span class='tstring_end'>&#39;</span></span><span class='rparen'>)</span> <span class='kw'>do</span> <span class='op'>|</span><span class='id identifier rubyid_file'>file</span><span class='op'>|</span>
    <span class='id identifier rubyid_file'>file</span><span class='period'>.</span><span class='id identifier rubyid_write'>write</span><span class='lparen'>(</span><span class='const'><span class='object_link'><a href="JSONeval.html" title="JSONeval (class)">JSONeval</a></span></span><span class='period'>.</span><span class='id identifier rubyid_ruby2json'><span class='object_link'><a href="JSONeval.html#ruby2json-class_method" title="JSONeval.ruby2json (method)">ruby2json</a></span></span><span class='lparen'>(</span><span class='ivar'>@dynamically_allocates</span><span class='rparen'>)</span><span class='rparen'>)</span>
  <span class='kw'>end</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="save_partition_addition_amount_to_file!-instance_method">
  
    #<strong>save_partition_addition_amount_to_file!</strong>(db_folder: @db_folder)  &#x21d2; <tt>Object</tt> 
  

  

  
</h3><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


76
77
78
79
80
81</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/dragonruby_pure_partitioned_array/partitioned_array_dr.rb', line 76</span>

<span class='kw'>def</span> <span class='id identifier rubyid_save_partition_addition_amount_to_file!'>save_partition_addition_amount_to_file!</span><span class='lparen'>(</span><span class='label'>db_folder:</span> <span class='ivar'>@db_folder</span><span class='rparen'>)</span>
  <span class='id identifier rubyid_path'>path</span> <span class='op'>=</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='embexpr_beg'>#{</span><span class='ivar'>@db_path</span><span class='embexpr_end'>}</span><span class='tstring_content'>/</span><span class='embexpr_beg'>#{</span><span class='ivar'>@db_name</span><span class='embexpr_end'>}</span><span class='tstring_end'>&quot;</span></span>
  <span class='id identifier rubyid_mkdir_bindir'><span class='object_link'><a href="top-level-namespace.html#mkdir_bindir-instance_method" title="#mkdir_bindir (method)">mkdir_bindir</a></span></span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>&quot;</span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_path'>path</span><span class='embexpr_end'>}</span><span class='tstring_content'>/</span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_db_folder'>db_folder</span><span class='embexpr_end'>}</span><span class='tstring_end'>&quot;</span></span><span class='rparen'>)</span>
  <span class='comment'>#FileUtils.touch(&quot;#{path}/#{db_folder}/partition_addition_amount.json&quot;)
</span>  <span class='const'>File</span><span class='period'>.</span><span class='id identifier rubyid_open'>open</span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>&quot;</span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_path'>path</span><span class='embexpr_end'>}</span><span class='tstring_content'>/</span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_db_folder'>db_folder</span><span class='embexpr_end'>}</span><span class='tstring_content'>/partition_addition_amount.json</span><span class='tstring_end'>&quot;</span></span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>w</span><span class='tstring_end'>&#39;</span></span><span class='rparen'>)</span> <span class='lbrace'>{</span> <span class='op'>|</span><span class='id identifier rubyid_f'>f</span><span class='op'>|</span> <span class='id identifier rubyid_f'>f</span><span class='period'>.</span><span class='id identifier rubyid_write'>write</span><span class='lparen'>(</span><span class='const'><span class='object_link'><a href="JSONeval.html" title="JSONeval (class)">JSONeval</a></span></span><span class='period'>.</span><span class='id identifier rubyid_ruby2json'><span class='object_link'><a href="JSONeval.html#ruby2json-class_method" title="JSONeval.ruby2json (method)">ruby2json</a></span></span><span class='lparen'>(</span><span class='ivar'>@partition_amount_and_offset</span><span class='rparen'>)</span><span class='rparen'>)</span> <span class='rbrace'>}</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="save_partition_to_file!-instance_method">
  
    #<strong>save_partition_to_file!</strong>(partition_id, db_folder: @db_folder)  &#x21d2; <tt>Object</tt> 
  

  

  
</h3><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


70
71
72
73
74</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/dragonruby_pure_partitioned_array/partitioned_array_dr.rb', line 70</span>

<span class='kw'>def</span> <span class='id identifier rubyid_save_partition_to_file!'>save_partition_to_file!</span><span class='lparen'>(</span><span class='id identifier rubyid_partition_id'>partition_id</span><span class='comma'>,</span> <span class='label'>db_folder:</span> <span class='ivar'>@db_folder</span><span class='rparen'>)</span>
  <span class='id identifier rubyid_partition_data'>partition_data</span> <span class='op'>=</span> <span class='id identifier rubyid_get_partition'>get_partition</span><span class='lparen'>(</span><span class='id identifier rubyid_partition_id'>partition_id</span><span class='rparen'>)</span>
  <span class='id identifier rubyid_path'>path</span> <span class='op'>=</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='embexpr_beg'>#{</span><span class='ivar'>@db_path</span><span class='embexpr_end'>}</span><span class='tstring_content'>/</span><span class='embexpr_beg'>#{</span><span class='ivar'>@db_name</span><span class='embexpr_end'>}</span><span class='tstring_end'>&quot;</span></span>
  <span class='const'>File</span><span class='period'>.</span><span class='id identifier rubyid_open'>open</span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>&quot;</span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_path'>path</span><span class='embexpr_end'>}</span><span class='tstring_content'>/</span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_db_folder'>db_folder</span><span class='embexpr_end'>}</span><span class='tstring_content'>/</span><span class='embexpr_beg'>#{</span><span class='ivar'>@db_name</span><span class='embexpr_end'>}</span><span class='tstring_content'>_part_</span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_partition_id'>partition_id</span><span class='embexpr_end'>}</span><span class='tstring_content'>.json</span><span class='tstring_end'>&quot;</span></span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>w</span><span class='tstring_end'>&#39;</span></span><span class='rparen'>)</span> <span class='lbrace'>{</span> <span class='op'>|</span><span class='id identifier rubyid_f'>f</span><span class='op'>|</span> <span class='id identifier rubyid_f'>f</span><span class='period'>.</span><span class='id identifier rubyid_write'>write</span><span class='lparen'>(</span><span class='const'><span class='object_link'><a href="JSONeval.html" title="JSONeval (class)">JSONeval</a></span></span><span class='period'>.</span><span class='id identifier rubyid_ruby2json'><span class='object_link'><a href="JSONeval.html#ruby2json-class_method" title="JSONeval.ruby2json (method)">ruby2json</a></span></span><span class='lparen'>(</span><span class='id identifier rubyid_partition_data'>partition_data</span><span class='rparen'>)</span><span class='rparen'>)</span> <span class='rbrace'>}</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="string2range-instance_method">
  
    #<strong>string2range</strong>(range_string)  &#x21d2; <tt>Object</tt> 
  

  

  
</h3><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


21
22
23
24</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/dragonruby_pure_partitioned_array/partitioned_array_dr.rb', line 21</span>

<span class='kw'>def</span> <span class='id identifier rubyid_string2range'>string2range</span><span class='lparen'>(</span><span class='id identifier rubyid_range_string'>range_string</span><span class='rparen'>)</span>
  <span class='id identifier rubyid_split_range'>split_range</span> <span class='op'>=</span> <span class='id identifier rubyid_range_string'>range_string</span><span class='period'>.</span><span class='id identifier rubyid_to_s'>to_s</span><span class='period'>.</span><span class='id identifier rubyid_split'>split</span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>..</span><span class='tstring_end'>&quot;</span></span><span class='rparen'>)</span>
  <span class='id identifier rubyid_split_range'>split_range</span><span class='lbracket'>[</span><span class='int'>0</span><span class='rbracket'>]</span><span class='period'>.</span><span class='id identifier rubyid_to_i'>to_i</span><span class='op'>..</span><span class='id identifier rubyid_split_range'>split_range</span><span class='lbracket'>[</span><span class='int'>1</span><span class='rbracket'>]</span><span class='period'>.</span><span class='id identifier rubyid_to_i'>to_i</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
  </div>

</div>

      <div id="footer">
  Generated on Wed Jan 25 03:04:39 2023 by
  <a href="https://yardoc.org" title="Yay! A Ruby Documentation Tool" target="_parent">yard</a>
  0.9.28 (ruby-3.2.0).
</div>

    </div>
  </body>
</html>